<!DOCTYPE html> 
<html lang="zh-CN">
<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- âœ… SEOä¼˜åŒ–ç”¨ meta å…ƒç´  -->
  <meta name="description" content="MeFan - æä¾›é«˜å“è´¨æ— çº¿è“ç‰™è€³æœºï¼Œå¸¦ç»™æ‚¨å“è¶Šçš„éŸ³é¢‘ä½“éªŒ" />
  <meta name="keywords" content="è“ç‰™è€³æœº, MeFan, æ— çº¿éŸ³é¢‘, é«˜å“è´¨éŸ³å“, é™å™ªè€³æœº" />
  <meta name="author" content="MeFan Solutions" />
  <meta name="robots" content="index, follow" />
  <!-- âœ… ç»“æŸ -->

  <title>MeFan - è®©ä½“éªŒæ— çº¿è‡ªç”±</title>
  <link rel="icon" href="MeFan Logo.png" type="image/x-icon"/>

  <!-- å¼•å…¥å­—ä½“ -->
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet"
  >

  <!-- æ ·å¼ä¸è„šæœ¬ -->
  <link rel="stylesheet" href="styles.css" />
  <script src="scripts.js" defer></script>
  <script src="scroll.js" defer></script>


<!-- âœ… è‡ªåŠ¨è·³è½¬è„šæœ¬ -->
  <!-- è‡ªåŠ¨è·³è½¬åˆ°ä¸»ç«™çš„ index.html -->
<meta http-equiv="refresh" content="0; url=https://oliverfr.com/index.html" />
<script>
  window.location.replace("https://oliverfr.com/index.html");
</script>


</head>
<body>

  <!-- é¡¶éƒ¨ï¼šæ·¡è‰²èƒŒæ™¯/æ¸å˜ï¼ˆé»˜è®¤ç¤ºä¾‹ï¼šæµ…è“æ¸å˜ï¼‰ -->
  <header class="header-gradient" id="mainHeader">
    <!-- å·¦ä¾§ Logo -->
    <img src="MeFan Logo.png" alt="MeFan Logo" class="logo-img" />

    <!-- æ¡Œé¢ç«¯å¯¼èˆªåˆ—è¡¨ï¼Œå±…ä¸­å¯¹é½ï¼Œå¸¦ Home / Products / About / Contact / æœç´¢æŒ‰é’® -->
    <nav class="desktop-nav">
      <ul class="nav-list">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <!-- æ¡Œé¢æœç´¢å›¾æ ‡ -->
        <li>
          <div class="search-icon" id="desktopSearchIcon">ğŸ”</div>
        </li>
      </ul>
    </nav>

    <!-- ç§»åŠ¨ç«¯å›¾æ ‡åŒºï¼šæœç´¢ + æ±‰å ¡èœå• -->
    <div class="mobile-icons">
      <!-- æœç´¢å›¾æ ‡ï¼Œä¸æ±‰å ¡èœå•ç›¸è· 30px -->
      <span id="mobileSearchIcon" class="mobile-search-icon">ğŸ”</span>

      <!-- æ±‰å ¡èœå•ï¼šä¸‰æ¡æ°´å¹³çº¿ï¼Œç«–å‘å †å ï¼Œç±»ä¼¼å°å·â€œä¸‰â€å­—å½¢ -->
      <div class="vertical-hamburger" id="menuIcon">
        <div class="v-bar"></div>
        <div class="v-bar"></div>
        <div class="v-bar"></div>
      </div>
    </div>

    <!-- ç§»åŠ¨ç«¯å…¨å±èœå• -->
    <nav id="mobileNav">
      <div class="close-btn" id="closeBtn">&times;</div>
      <ul>
      <!-- ä¿®æ”¹ä¸ºè§¦å‘äºŒçº§é¢æ¿ï¼Œå¢åŠ  data-level å±æ€§ -->
        <li><a href="javascript:void(0);" data-level="home">Home</a></li>
        <li><a href="javascript:void(0);" data-level="products">Products</a></li>
        <li><a href="javascript:void(0);" data-level="about">About</a></li>
        <li><a href="javascript:void(0);" data-level="contact">Contact</a></li>
      </ul>
    </nav>
  </header>
  
  <!-- æ–°å¢ï¼šç§»åŠ¨ç«¯äºŒçº§èœå•é¢æ¿ï¼ˆä»…æ‰‹æœºç«¯æœ‰æ•ˆï¼‰ -->
  <div id="mobileNavLevel2Home" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">Explore the Mefan</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <ul>
        <li><a href="http://mefans.pages.dev" target="_blank">Explore the Mefan</a></li>
      </ul>
    </div>
  </div>

  <div id="mobileNavLevel2Products" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">Products</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <!-- åˆ†ç»„1ï¼šMefan Series -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">MEFAN SERIES</div>
        <ul class="menu-panel__group-list">
          <li><a href="product-lite.html" target="_blank">MeFan Lite</a></li>
          <li><a href="product-x1.html" target="_blank">MeFan X1</a></li>
          <li><a href="product-pro.html" target="_blank">MeFan Pro</a></li>
        </ul>
      </div>
      <!-- åˆ†ç»„2ï¼šMefan Premium Series -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">MEFAN PREMIUM SERIES</div>
        <ul class="menu-panel__group-list">
          <li><a href="example.html" target="_blank">Premium p1</a></li>
          <li><a href="example.html" target="_blank">Premium p2</a></li>
          <li><a href="example.html" target="_blank">Premium p3</a></li>
        </ul>
      </div>
      <!-- åˆ†ç»„3ï¼šMefan Classic Series -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">MEFAN CLASSIC SERIES</div>
        <ul class="menu-panel__group-list">
          <li><a href="example.html" target="_blank">Classic c1</a></li>
          <li><a href="example.html" target="_blank">Classic c2</a></li>
          <li><a href="example.html" target="_blank">Classic c3</a></li>
        </ul>
      </div>
    </div>
  </div>
   <!-- About äºŒçº§é¢æ¿ -->
  <div id="mobileNavLevel2About" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">About</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <!-- åˆ†ç»„1ï¼šPERSONAL -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">PERSONAL</div>
        <ul class="menu-panel__group-list">
          <li><a href="http://mefans.pages.dev" target="_blank">mefans.pages.dev</a></li>
        </ul>
      </div>
      <!-- åˆ†ç»„2ï¼šOPPORTUNITY & CHALLENGE -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">OPPORTUNITY &amp; CHALLENGE</div>
        <ul class="menu-panel__group-list">
          <li><a href="http://mefans.pages.dev" target="_blank">mefans.pages.dev</a></li>
          <li><a href="example.html" target="_blank">example.html</a></li>
          <li><a href="http://mefans.pages.dev/example.html" target="_blank">example.html</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Contact äºŒçº§é¢æ¿ -->
  <div id="mobileNavLevel2Contact" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">Contact</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <!-- åˆ†ç»„ï¼šCONTACT -->
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">CONTACT</div>
        <ul class="menu-panel__group-list">
          <li><a href="contact.html" target="_blank">Contact us</a></li>
        </ul>
      </div>
    </div>
  </div>
 <!-- å…¨å±é˜´å½±å±‚ï¼Œç”¨äºç‚¹å‡»/ç§»åŠ¨å…³é—­å¤§é¢æ¿ -->
<div class="hover1-overlay" id="hover1Overlay"></div>

<!-- æ¨¡ç³ŠèƒŒæ™¯å±‚ -->
<div class="blur1-bg" id="blur1Bg"></div>

<!-- æ‚¬åœé¢æ¿å®¹å™¨ï¼ˆå›ºå®šåœ¨å¯¼èˆªä¸‹æ–¹ï¼‰ -->
<div class="hover1-content" id="hover1Content">
  <!-- é¦–é¡µé¢æ¿ -->
  <div class="hover1-section" id="hover1Home">
    <div class="home1-horizontal-row">
      <div class="home1-intro-col">
        <h3>Home - ç‰¹åˆ«æ¨è</h3>
        <p>æ¬¢è¿å›åˆ°é¦–é¡µï¼Œçœ‹çœ‹ MeFan æœ€æ–°åŠ¨æ€ã€‚</p>
      </div>
      <div class="home1-links-col">
        <ul>
          <li><a href="https://mefans.pages.dev" target="_blank" rel="noopener noreferrer">MeFan</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- äº§å“é¢æ¿ -->
  <div class="hover1-section" id="hover1Products">
    <div class="products-horizontal-row">
      <div class="products-intro-col">
        <h3>Products - äº§å“é˜µåˆ—</h3>
        <p>åœ¨è¿™é‡Œå¯ä»¥ç›´æ¥é¢„è§ˆæˆ–è·³è½¬åˆ°å„äº§å“ä»‹ç»ï¼Œä½“éªŒæ›´å¤šã€‚</p>
        <ul>
          <li><a href="product-lite.html">MeFan Lite</a></li>
          <li><a href="product-x1.html">MeFan X1</a></li>
          <li><a href="product-pro.html">MeFan Pro</a></li>
        </ul>
      </div>
      <div class="premium1-column">
        <h4 class="premium1-title">Premium</h4>
        <ul class="premium1-list">
          <li><a href="example.html">p1</a></li>
          <li><a href="example.html">p2</a></li>
          <li><a href="example.html">p3</a></li>
        </ul>
      </div>
      <div class="classic1-column">
        <h4 class="classic1-title">Classic</h4>
        <ul class="classic1-list">
          <li><a href="example.html">c1</a></li>
          <li><a href="example.html">c2</a></li>
          <li><a href="example.html">c3</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- About é¢æ¿ -->
  <div class="hover1-section" id="hover1About">
    <div class="about1-horizontal-row">
      <div class="about1-intro-col">
        <h3>About - å…³äºæˆ‘ä»¬</h3>
        <p>è®¤è¯† MeFan å›¢é˜Ÿï¼Œäº†è§£æˆ‘ä»¬çš„èƒŒæ™¯ã€ç†å¿µä¸æ„¿æ™¯ã€‚</p>
      </div>
      <div class="about1-links-col">
        <ul>
          <li><a href="about.html">About us</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Contact é¢æ¿ -->
  <div class="hover1-section" id="hover1Contact">
    <div class="contact1-horizontal-row">
      <div class="contact1-intro-col">
        <h3>Contact - è”ç³»æˆ‘ä»¬</h3>
        <p>é—®é¢˜å’¨è¯¢ã€å•†åŠ¡åˆä½œï¼Œè¯·åœ¨æ­¤æ‰¾åˆ°è”ç³»æ–¹å¼ã€‚</p>
      </div>
      <div class="contact1-links-col">
        <ul>
          <li><a href="contact.html">Contact us</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


  <!-- ===== å…¨å±æœç´¢ç•Œé¢ ===== -->
  <div class="search-panel" id="searchPanel">
    <!-- å…³é—­æŒ‰é’® (åœ¨æ‰‹æœºç«¯é ä¸Šå³ä¾§,é¿å…æ–‡å­—é®æŒ¡) -->
    <span class="search-close-btn" id="searchClose">&times;</span>

    <!-- å¤§æ ‡é¢˜(å¯ç¼–è¾‘)ï¼ŒåŒæ—¶ç”¨ä¼ªå…ƒç´ æ˜¾ç¤ºæç¤ºâ€œğŸ” Search mefans.pages.devâ€ -->
    <h2 class="search-title" id="searchTitle" contenteditable="true" data-placeholder="ğŸ” Search oliverfr.com"></h2>	

    <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
    <div class="search-results" id="searchResults"></div>

    <!-- Quick Links åŒºåŸŸï¼ˆå›ºå®šå±•ç¤ºï¼‰ -->
    <div class="quick-links">
      <p>Quick Links</p>
      <ul>
        <li><a href="products.html">Products</a></li>
        <li><a href="about.html">About Us</a></li>
       <li><a href="https://mefans.pages.dev" target="_blank" rel="noopener noreferrer">Support</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </div>
 <!-- å¸§åŠ¨ç”» -->
<section class="animation-container" id="animationContainer">
    <canvas id="animationCanvas"></canvas>
    <div class="overlay-content">
        <p class="banner-text">Step into natureâ€™s serenity with MeFan.</p>

        <!-- âœ… æ–°å¢ wrapper å®¹å™¨ -->
        <div class="cta1-button-wrapper">
            <!-- âœ… Explore Now æŒ‰é’® -->
            <a href="https://mefans.pages.dev" target="_blank" rel="noopener noreferrer" class="cta1-button">Explore Now</a>

            <!-- âœ… Almost Here æŒ‰é’® -->
            <a href="enjoyExperience.html" target="_blank" rel="noopener noreferrer" class="cta1-button">Almost Here</a>
        </div>
    </div>

    <button id="playPauseButton" class="play-pause">âšâš</button>
</section>

    <!-- ç¤¾äº¤è”ç³»ä¿¡æ¯æ¨¡å— -->
<div id="info1-contact-wrapper">
    <div id="info1-contact-container">
      <!-- Contact QR Codeï¼ˆä»…æ‚¬åœæ˜¾ç¤ºäºŒç»´ç ï¼‰ -->
      <div class="info1-contact-item">
        <img src="qr-icon.png" alt="QR Code" class="info1-icon"/>
        <!-- MODIFIED: åˆ é™¤å¤šä½™çš„ </a> æ ‡ç­¾ -->
        <div class="info1-hover-zone"></div> <!-- é¼ æ ‡ç¼“å†²åŒº -->
        <span class="info1-popup">
          <img src="Mefan@Oliver F.png" alt="Contact QR" class="info1-qr"/>
        </span>
      </div>
    </div>
</div> <!-- MODIFIED: å°†é”™è¯¯çš„ </section> æ”¹ä¸º </div> -->
<div class="natural1-carousel-container">
  <!-- å·¦ä¾§åˆ‡æ¢æŒ‰é’® -->
  <button class="natural1-carousel-prev">&lt;</button>

  <!-- 
    å¤–å±‚åŒ…è£¹ .natural1-carousel-track-wrapper
    ä¸æ”¹åŠ¨ï¼Œä¿æŒåŸç»“æ„
  -->
  <div class="natural1-carousel-track-wrapper">
    <div class="natural1-carousel-track">
      
      <!-- è½®æ’­é¡¹1 -->
      <div class="natural1-carousel-slide">
        <a href="example.html" target="_blank">
          <img src="nature1.png" alt="nature1">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn" 
                      onclick="window.open('example.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">ç§»åŠ¨ç«¯Transform</div>
          </div>
        </div>
      </div>

      <!-- è½®æ’­é¡¹2 -->
      <div class="natural1-carousel-slide">
        <a href="example.html" target="_blank">
          <img src="nature2.png" alt="nature2">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('example.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">æ‰‹æœºåˆ’å¿«ä¸æ»‘</div>
          </div>
        </div>
      </div>

      <!-- è½®æ’­é¡¹3 -->
      <div class="natural1-carousel-slide">
        <a href="example.html" target="_blank">
          <img src="nature3.png" alt="nature3">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('example.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">æ— åç§»</div>
          </div>
        </div>
      </div>

      <!-- è½®æ’­é¡¹4-->
      <div class="natural1-carousel-slide">
        <a href="example.html" target="_blank">
          <img src="nature4.png" 
               alt="nature4">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('example.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">æ‰‹æœºç«¯å¤šä¸€å¸§</div>
          </div>
        </div>
      </div>

    <!-- è½®æ’­é¡¹5 -->
      <div class="natural1-carousel-slide">
        <a href="product-lite.html" target="_blank">
          <img src="MeFan Lite.png" 
               alt="MeFan Lite">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('product-lite.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">MeFan Lite</div>
          </div>
        </div>
      </div>

    <!-- è½®æ’­é¡¹6-->
      <div class="natural1-carousel-slide">
        <a href="product-x1.html" target="_blank">
          <img src="MeFan X1.png" 
               alt="MeFan X1">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('example.htmlproduct-x1.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">MeFan X1</div>
          </div>
        </div>
      </div>

    <!-- è½®æ’­é¡¹7 -->
      <div class="natural1-carousel-slide">
        <a href="product-pro.html" target="_blank">
          <img src="MeFan Pro.png" 
               alt="MeFan Pro">
        </a>
        <div class="natural1-overlay">
          <div class="natural1-button-title-group">
            <div class="natural1-bottom-row">
              <button class="natural1-explore-btn"
                      onclick="window.open('product-pro.html', '_blank')">
                Explore now
              </button>
              <div class="natural1-text-bottom">æ¡Œé¢æ²¿ç”¨scroll.</div>
            </div>
            <div class="natural1-title">Mefan Pro</div>
          </div>
        </div>
      </div>







    </div>
  </div>

  <!-- å³ä¾§åˆ‡æ¢æŒ‰é’® -->
  <button class="natural1-carousel-next">&gt;</button>
</div>

<!-- å°åœ†ç‚¹å®¹å™¨ (ä¿ç•™ä¸å˜) -->
<div class="natural1-carousel-dots-container">
  <div class="natural1-carousel-dots">
    <span class="natural1-carousel-dot"></span>
    <span class="natural1-carousel-dot"></span>
    <span class="natural1-carousel-dot"></span>
    <span class="natural1-carousel-dot"></span>
<span class="natural1-carousel-dot"></span>
    <span class="natural1-carousel-dot"></span>
    <span class="natural1-carousel-dot"></span>
  </div>
</div>

  <!-- Heroï¼šå…¨å±èƒŒæ™¯è½®æ’­ -->
  <section class="hero">
    <div class="hero-slides" id="hero-slides">
      <div class="hero-slide" style="background-image: url('slide1.jpg');"></div>
      <div class="hero-slide" style="background-image: url('slide2.jpg');"></div>
      <div class="hero-slide" style="background-image: url('slide3.jpg');"></div>
    </div>

    <div class="hero-dots">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>

    <div class="hero-content">
      <h1>MeFan - è®©ä½“éªŒæ— çº¿è‡ªç”±</h1>
      <p>é€šè¿‡æˆ‘ä»¬çš„æ— çº¿è“ç‰™è€³æœºäº«å—æ— ç¼è¿æ¥å’Œæ¸…æ™°çš„éŸ³è´¨ã€‚</p>
      <a href="iconic.html" class="btn">äº†è§£æ›´å¤š</a>
    </div>
  </section>




  <!-- Premium BT Earbuds å›¾ç‰‡ä¸æŒ‰é’® -->
  <section class="premium-earbuds-section">
    <div class="premium-earbuds-image">
      <img src="Premium BT Earbuds.png" alt="Premium BT Earbuds" class="premium-earbuds-img" />
      <div class="premium-overlay">
        <a href="landscape.html" class="btn learn-more-btn">Learn More</a>
        <a href="touch.html" class="btn enjoy-btn">Enjoy</a>
      </div>
    </div>
  </section>

  <!-- æ–°æ’å…¥çš„6å¼ å›¾ç‰‡ -->
  <section class="image-gallery">
    <div class="image-card">
      <a href="Crystal-Clear-Lakeside.html">
        <img src="Crystal-Clear Lakeside.png" alt="Crystal Clear Lakeside"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
    <div class="image-card">
      <a href="Golden-Wheat-Fields.html">
        <img src="Golden Wheat Fields.png" alt="Golden Wheat Fields"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
    <div class="image-card">
      <a href="Scenic-Riverside-Bend.html">
        <img src="Scenic Riverside Bend.png" alt="Scenic Riverside Bend"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
    <div class="image-card">
      <a href="Sunset-Seaside.html">
        <img src="Sunset Seaside.png" alt="Sunset Seaside"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
    <div class="image-card">
      <a href="Tranquil-Mountain-Valley.html">
        <img src="Tranquil Mountain Valley.png" alt="Tranquil Mountain Valley"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
    <div class="image-card">
      <a href="Serene-Forest-Trail.html">
        <img src="Serene Forest Trail.png" alt="Serene Forest Trail"/>
        <div class="overlay">
          <p>Learn More</p>
        </div>
      </a>
    </div>
  </section>

<!-- è½®æ’­å®¹å™¨ -->
<div class="custom-slider1">
  <div class="slider1-content">
    <div class="slider1-images">
      <div class="slider1-slide active">
        <img src="Zhang Duhu Lake.png" alt="Zhang Duhu Lake" onclick="window.open('example.html', '_blank');">
        <div class="view1-container">
          <button class="view1-btn" onclick="window.open('example.html', '_blank');">Taking in the view</button>
          <span class="view1-text">Zhang Duhu Lake</span>
        </div>
      </div>
      <div class="slider1-slide">
        <img src="Zhang Duhu Lake view.png" alt="Zhang Duhu Lake view" onclick="window.open('example.html', '_blank');">
        <div class="view1-container">
          <button class="view1-btn" onclick="window.open('example.html', '_blank');">Taking in the view</button>
          <span class="view1-text">Zhang Duhu Lake view</span>
        </div>
      </div>
      <div class="slider1-slide">
        <img src="Xinzhou Shaotanhe Lake.png" alt="Xinzhou Shaotanhe Lake" onclick="window.open('example.html', '_blank');">
        <div class="view1-container">
          <button class="view1-btn" onclick="window.open('example.html', '_blank');">Taking in the view</button>
          <span class="view1-text">Xinzhou Shaotanhe Lake</span>
        </div>
      </div>
      <div class="slider1-slide">
        <img src="Zhang Duhu wetland park.png" alt="Zhang Duhu wetland park" onclick="window.open('example.html', '_blank');">
        <div class="view1-container">
          <button class="view1-btn" onclick="window.open('example.html', '_blank');">Taking in the view</button>
          <span class="view1-text">Zhang Duhu wetland park</span>
        </div>
      </div>
      <div class="slider1-slide">
        <img src="Zhang Duhu Shuishan.png" alt="Zhang Duhu Shuishan" onclick="window.open('example.html', '_blank');">
        <div class="view1-container">
          <button class="view1-btn" onclick="window.open('example.html', '_blank');">Taking in the view</button>
          <span class="view1-text">Zhang Duhu Shuishan</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ğŸ“Œ æ’­æ”¾/æš‚åœæŒ‰é’® & è¿›åº¦æ¡ -->
<div class="slider1-controls-container">
  <!-- âœ… æ’­æ”¾/æš‚åœ æŒ‰é’®ï¼ˆâš ï¸ è¿™é‡Œä¸åŠ  `window.open`ï¼Œé¿å…è¯¯è·³è½¬ï¼‰ -->
  <button id="slider1-play-btn" class="slider1-btn playing">
    <span id="slider1-btn-icon">â¸</span> <!-- åˆå§‹çŠ¶æ€ä¸ºæ­£åœ¨æ’­æ”¾ -->
  </button>

  <!-- âœ… è¿›åº¦æ¡ -->
  <div class="slider1-progress">
    <div class="slider1-progress-bar"></div>
    <div class="slider1-progress-dots">
      <span class="slider1-dot active" data-index="0"></span>
      <span class="slider1-dot" data-index="1"></span>
      <span class="slider1-dot" data-index="2"></span>
      <span class="slider1-dot" data-index="3"></span>
      <span class="slider1-dot" data-index="4"></span>
    </div>
  </div>
</div>





  <!-- âœ… 3) æ— é™æ»šåŠ¨ä¼˜åŒ– -->
  <section class="infinite-scroller-container">
    <div class="infinite-scroller">
      <div class="infinite-scroller-track" id="infiniteScroller">
        <div class="product-marquee-card">
          <a href="brookside.html">
            <img src="A peaceful brookside setting.png" alt="Brookside setting" />
            <div class="overlay">Explore now</div>
            <p class="text">Brookside setting</p>
          </a>
        </div>
        <div class="product-marquee-card">
          <a href="gardenia.html">
            <img src="A scenic riverside bend.png" alt="Riverside bend" />
            <div class="overlay">Explore now</div>
            <p class="text">Riverside bend</p>
          </a>
        </div>
        <div class="product-marquee-card">
          <a href="serene-coastal-shore.html">
            <img src="A serene coastal shore.png" alt="Coastal shore" />
            <div class="overlay">Explore now</div>
            <p class="text">Coastal shore</p>
          </a>
        </div>
        <div class="product-marquee-card">
          <a href="shaded-forest-path.html">
            <img src="A shaded forest path.png" alt="Forest path" />
            <div class="overlay">Explore now</div>
            <p class="text">Forest path</p>
          </a>
        </div>
      </div>

      <!-- âœ… è®©æŒ‰é’®ä¸æ»šåŠ¨åŒºåŸŸä¿æŒåœ¨ä¸€èµ· -->
      <div id="pauseBtn-container">
        <button id="pauseBtn"></button>
      </div>
    </div>
  </section>
<!-- âœ… æ–°å¢ç¬¬ä¸€è¡Œå†…å®¹ -->
    <div class="extra-line">æç¤º:æœ¬ç½‘ç«™ä¸­å›¾ç‰‡çš„å‘½åä¸å®é™…æ’­æ”¾,å®é™…å±•ç¤ºçš„å›¾ç‰‡å†…å®¹æ˜¯ä¸ç¬¦çš„(Note: Image names on this website do not correspond to the actual displayed or played content.)</div>
  <!-- ç®€è¦ä»‹ç»åŒº -->
  <section class="intro-section">
    <h2>ä¸ºä»€ä¹ˆé€‰æ‹© MeFan?</h2>
    <p>æˆ‘ä»¬ä¸“æ³¨äºæ— çº¿éŸ³é¢‘é¢†åŸŸï¼Œèåˆæœ€æ–°æŠ€æœ¯ä¸æ—¶å°šè®¾è®¡ï¼Œä¸ºæ‚¨å¸¦æ¥èˆ’é€‚ä¸å“è¶Šçš„è†å¬ä½“éªŒã€‚</p>
    <button class="btn" data-modal-target="#whyModal">æ›´å¤šè¯¦æƒ…</button>
  </section>

  <!-- åœºæ™¯åº”ç”¨å¡ç‰‡åŒº -->
  <section class="use-case-section">
    <h2>åº”ç”¨åœºæ™¯</h2>
    <p>åœ¨ä¸åŒåœºæ™¯ä¸­ï¼ŒMeFanè€³æœºå¦‚ä½•å±•ç°å“è¶Šè¡¨ç°ï¼Ÿ</p>

    <div class="use-case-grid">
      <!-- è¿åŠ¨åœºæ™¯ -> #sportModal -->
      <div class="use-case-item" data-modal-target="#sportModal">
        <h3>è¿åŠ¨åœºæ™¯</h3>
        <p>è¿åŠ¨æ—¶çš„é˜²æ°´ã€é˜²æ±—è¡¨ç°â€¦â€¦</p>
      </div>
      <!-- é€šå‹¤åœºæ™¯ -> #commuteModal -->
      <div class="use-case-item" data-modal-target="#commuteModal">
        <h3>é€šå‹¤åœºæ™¯</h3>
        <p>åœ°é“ã€å…¬äº¤ã€åŠå…¬å®¤ç­‰å™ªéŸ³ç¯å¢ƒè¡¨ç°â€¦â€¦</p>
      </div>
      <!-- ä¼šè®®åœºæ™¯ -> #meetingModal -->
      <div class="use-case-item" data-modal-target="#meetingModal">
        <h3>ä¼šè®®åœºæ™¯</h3>
        <p>è¯­éŸ³é€šè¯ã€é™å™ªéº¦å…‹é£ç­‰â€¦â€¦</p>
      </div>
    </div>
  </section>

  <section class="value-section">
    <h2>Our Vision & Core Values</h2>
    <p>At Mefan, weâ€™re at the very beginning of something exciting. Though our vision is still in its early stages, we believe deeply in the value of hard work, learning, and steady progress.</p>
    <p>We know the path ahead will take time and persistence. Success isnâ€™t immediate, but itâ€™s built step by step. Weâ€™re committed to refining our ideas, focusing on quality, and staying true to our mission of creating meaningful audio experiences.</p>
    <p>For now, we focus on laying the foundation. We aim to deliver real value to our future customers with every product we create. Your trust means a lot to us as we start this journey. The road may be long, but weâ€™re confident that with time, this vision will take shape.</p>
  </section>

  <!-- æ¨ªçº¿éƒ¨åˆ† -->
  <div class="divider"></div>

  <!-- æ ¸å¿ƒä»·å€¼å±•ç¤ºéƒ¨åˆ† -->
  <section class="core-values-section">
    <div class="core-value-item">
      <h3 class="dropdown">Mefan Value <span class="dropdown-arrow">&#x2304;</span></h3>
      <ul class="dropdown-content">
        <li><a href="accessibility.html">Accessibility</a></li>
      </ul>
    </div>

    <div class="core-value-item">
      <h3 class="dropdown">For Business <span class="dropdown-arrow">&#x2304;</span></h3>
      <ul class="dropdown-content">
        <li><a href="mefan-and-business.html">Mefan and Business</a></li>
      </ul>
    </div>

    <div class="core-value-item">
      <h3 class="dropdown">Entertainment <span class="dropdown-arrow">&#x2304;</span></h3>
      <ul class="dropdown-content">
        <li><a href="mefan-one.html">Mefan One</a></li>
      </ul>
    </div>
  </section>


  <!-- Social Media Icons -->
  <div class="footer-info">
    <div class="social-media">
      <a href="https://wa.me/12817839998" target="_blank" aria-label="WhatsApp">
        <img src="https://cdn-icons-png.flaticon.com/512/124/124034.png" alt="WhatsApp" class="social-icon"/>
      </a>
      <a href="https://linkedin.com/in/oliver-f-448b8a287" target="_blank" aria-label="LinkedIn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png" alt="LinkedIn" class="social-icon"/>
      </a>
      <a href="https://web.skype.com/?openPstnPage=true" target="_self" aria-label="Skype">
        <img src="Skype Logo.png" alt="Skype Logo" class="social-icon"/>
      </a>
      <a href="weixin://dl/chat?wxid=wxid_kesvxwp296ci12" aria-label="WeChat">
        <img src="WeChat Logo.png" alt="WeChat Logo" class="social-icon"/>
      </a>
    </div>
  </div>

  <!-- æ¨ªçº¿éƒ¨åˆ† -->
  <div class="divider"></div>
  <div class="footer-extend">
    <p>&copy; 2025 MeFan@Oliver F. All rights reserved.</p>
  </div>

  <!-- 4ä¸ªæ¨¡æ€çª—å£ (å»é‡å¹¶ä¿®æ­£) -->
  <div class="modal" id="whyModal">
    <div class="modal-content">
      <span class="modal-close" data-modal-close>&times;</span>
      <iframe
        src="whyMeFanDetail.html"
        frameborder="0"
        class="modal-iframe">
      </iframe>
    </div>
  </div>

  <div class="modal" id="sportModal">
    <div class="modal-content">
      <span class="modal-close" data-modal-close>&times;</span>
      <iframe
        src="useCaseSport.html"
        frameborder="0"
        class="modal-iframe">
      </iframe>
    </div>
  </div>

  <div class="modal" id="commuteModal">
    <div class="modal-content">
      <span class="modal-close" data-modal-close>&times;</span>
      <iframe
        src="useCaseCommute.html"
        frameborder="0"
        class="modal-iframe">
      </iframe>
    </div>
  </div>

  <div class="modal" id="meetingModal">
    <div class="modal-content">
      <span class="modal-close" data-modal-close>&times;</span>
      <iframe
        src="useCaseMeeting.html"
        frameborder="0"
        class="modal-iframe">
      </iframe>
    </div>
  </div>
  <!-- å†…è”è„šæœ¬ï¼šæœç´¢é€»è¾‘ä¸äº‹ä»¶ï¼ˆåŸæœ‰ï¼‰ -->
 <!-- å…¶ä½™HTMLç»“æ„ã€CSSé“¾æ¥ç­‰ä¿æŒä¸å˜ï¼Œåœ¨ </body> å‰æ’å…¥ä»¥ä¸‹è„šæœ¬ -->
<!-- å…¶ä»– HTML ç»“æ„... -->


  <!-- æ–°å¢ï¼šå›åˆ°é¡¶éƒ¨æŒ‰é’® -->
  <button id="backToTop" title="Back to Top">&#8679;</button>



<script>
  /*************************************
   * è„šæœ¬Aï¼šspec1 æ‰‹åŠ¨å·¦å³åˆ‡æ¢è½®æ’­
   *************************************/
  (function () {
    // A1) ç‹¬ç«‹ç­‰å¾…å›¾ç‰‡åŠ è½½ï¼ˆä»…ç”¨äº spec1 æ¨¡å—ï¼‰
    function waitImagesLoadedSpec1(images, callback) {
      let loadedCount = 0;
      const total = images.length;
      function checkDone() {
        loadedCount++;
        if (loadedCount >= total) {
          callback();
        }
      }
      images.forEach((img) => {
        if (img.complete) {
          checkDone();
        } else {
          img.addEventListener("load", checkDone);
          img.addEventListener("error", checkDone);
        }
      });
      if (total === 0) callback();
    }

    // A2) åˆå§‹åŒ– spec1 æ‰‹åŠ¨è½®æ’­ï¼ˆé€»è¾‘ã€åŠŸèƒ½ä¸å†…å®¹å‡ä¿æŒåŸæ ·ï¼‰
    const initspec1ManualCarouselTrack = () => {
      const container = document.querySelector(".spec1-carousel-container");
      const track     = document.querySelector(".spec1-carousel-track");
      let slides      = Array.from(document.querySelectorAll(".spec1-carousel-slide"));
      const prevBtn   = document.querySelector(".spec1-carousel-prev");
      const nextBtn   = document.querySelector(".spec1-carousel-next");

      if (!container || !track || slides.length === 0 || !prevBtn || !nextBtn) {
        console.warn("spec1 hand-control carousel: elements or arrows not found!");
        return;
      }

      const totalReal = slides.length;
      let currentIndex = 1;
      let isAnimating  = false;
      let slideWidth   = 0;
      let gapWidth     = 15;

      // 1) å…‹éš†é¦–å°¾ => å®ç°æ— ç¼è½®æ’­
      const firstClone = slides[0].cloneNode(true);
      const lastClone  = slides[totalReal - 1].cloneNode(true);
      track.appendChild(firstClone);
      track.insertBefore(lastClone, track.firstChild);

      slides = Array.from(track.querySelectorAll(".spec1-carousel-slide"));

      function updateSlideWidth() {
        if (window.innerWidth <= 768) {
          const containerWidth = container.offsetWidth;
          gapWidth = containerWidth * 0.04;
          slides.forEach((slide) => {
            slide.style.width = `${containerWidth * 0.85}px`;
          });
          slideWidth = containerWidth * 0.85 + gapWidth;
        } else {
          slides.forEach((slide) => {
            slide.style.width = "";
          });
          gapWidth = 15;
          const measured = slides[1].getBoundingClientRect().width;
          slideWidth = measured + gapWidth;
        }
      }

      function updateCarousel(animated = true) {
        updateSlideWidth();
        track.style.transition = animated ? "transform 0.5s ease-in-out" : "none";

        if (window.innerWidth <= 768) {
          track.style.transform = `translateX(${-currentIndex * slideWidth + gapWidth/2}px)`;
        } else {
          track.style.transform = `translateX(${-currentIndex * slideWidth}px)`;
        }

        slides.forEach(sl => sl.classList.remove("active", "prev", "next", "shadow"));
        slides[currentIndex]?.classList.add("active");

        const nextIndex = (currentIndex + 1) % slides.length;
        const prevIndex = (currentIndex - 1 + slides.length) % slides.length;
        slides[nextIndex]?.classList.add("next");
        slides[prevIndex]?.classList.add("prev");

        slides.forEach(sl => {
          if (!sl.classList.contains("active")) {
            sl.classList.add("shadow");
          }
        });

        slides.forEach((slide) => {
          const link = slide.querySelector("a");
          if (link) {
            link.style.pointerEvents = slide.classList.contains("active") ? "auto" : "none";
          }
        });
      }

      function nextSlide() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex++;
        updateCarousel(true);
        setTimeout(() => {
          if (currentIndex === slides.length - 1) {
            track.style.transition = "none";
            currentIndex = 1;
            updateCarousel(false);
          }
          isAnimating = false;
        }, 500);
      }
      function prevSlide() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex--;
        updateCarousel(true);
        setTimeout(() => {
          if (currentIndex === 0) {
            track.style.transition = "none";
            currentIndex = slides.length - 2;
            updateCarousel(false);
          }
          isAnimating = false;
        }, 500);
      }

      prevBtn.addEventListener("click", () => {
        if (!isAnimating) prevSlide();
      });
      nextBtn.addEventListener("click", () => {
        if (!isAnimating) nextSlide();
      });

      slides.forEach((slide) => {
        slide.addEventListener("click", (e) => {
          if (slide.classList.contains("active")) {
            // å½“å‰ slide è¢«ç‚¹å‡»æ—¶ä¸ä½œå¤„ç†
          } else if (slide.classList.contains("next")) {
            e.preventDefault();
            if (!isAnimating) nextSlide();
          } else if (slide.classList.contains("prev")) {
            e.preventDefault();
            if (!isAnimating) prevSlide();
          }
        });
        const exploreBtn = slide.querySelector(".spec1-explore-btn");
        if (exploreBtn) {
          exploreBtn.addEventListener("click", (ev) => {
            ev.stopPropagation();
          });
        }
      });

      let startX = 0;
      let isSwiping = false;
      track.addEventListener("touchstart", (e) => {
        if (e.touches.length === 1 && !isAnimating) {
          startX = e.touches[0].clientX;
          isSwiping = true;
        }
      }, { passive: true });
      track.addEventListener("touchmove", () => {}, { passive: true });
      track.addEventListener("touchend", (e) => {
        if (!isSwiping) return;
        isSwiping = false;
        const endX = e.changedTouches[0].clientX;
        const distance = endX - startX;
        if (Math.abs(distance) > 20) {
          if (distance < 0) nextSlide();
          else prevSlide();
        }
      }, { passive: true });

      function onResize() {
        isAnimating = false;
        track.style.transition = "none";
        updateCarousel(false);
        setTimeout(() => {
          track.style.transition = "transform 0.5s ease-in-out";
        }, 50);
      }
      window.addEventListener("resize", onResize);

      track.style.transition = "none";
      updateCarousel(false);
      setTimeout(() => {
        track.style.transition = "transform 0.5s ease-in-out";
      }, 50);

      prevBtn.style.display = "block";
      nextBtn.style.display = "block";
    };

    // A3) ç¡®ä¿æ‰€æœ‰å›¾ç‰‡åŠ è½½å®Œæˆåå†åˆå§‹åŒ–è½®æ’­
    window.addEventListener('load', () => {
      const spec1Imgs = document.querySelectorAll(".spec1-carousel-slide img");
      if (spec1Imgs.length > 0) {
        waitImagesLoadedSpec1(spec1Imgs, () => {
          initspec1ManualCarouselTrack();
        });
      }
    });
  })();

  /***************************************************
   * è„šæœ¬Bï¼šnatural1 è½®æ’­ (æ¡Œé¢ç«¯ scroll-snap / ç§»åŠ¨ç«¯ transform)
   ***************************************************/
 
(function(){
  // ============== 1) è·å–å®¹å™¨ & ç­‰å›¾åŠ è½½ ==============
  const container = document.querySelector(".natural1-carousel-container");
  if (!container) return;

  container.style.visibility = "hidden"; // åˆå§‹éšè—

  const allImgs = Array.from(document.querySelectorAll(".natural1-carousel-slide img"));
  waitImagesLoadedNatural1(allImgs, () => {
    if (!container) return;
    const isMobile = window.innerWidth <= 768;
    if(isMobile){
      initSnapCarouselMobileApple();  // ç§»åŠ¨ç«¯ => ä¸å˜
    } else {
      initSnapCarouselDesktopWithObserver(); // æ¡Œé¢ç«¯ => æ–°é€»è¾‘(åˆ°å¯è§†åŒºæ‰å¯åŠ¨)
    }
    container.style.visibility = "visible";
  });

  // ============== 2) ç­‰å›¾ç‰‡åŠ è½½å‡½æ•° (ä¿æŒåŸå…ˆ) ==============
  function waitImagesLoadedNatural1(images, callback) {
    let loaded=0;
    const total= images.length;
    if(!total){
      callback();
      return;
    }
    images.forEach(img=>{
      if(img.complete){
        check();
      } else {
        img.addEventListener("load", check);
        img.addEventListener("error", check);
      }
    });
    function check(){
      loaded++;
      if(loaded>= total){
        callback();
      }
    }
  }

  // ============== 3) ç§»åŠ¨ç«¯ => ä¸‰å¥— + transform + ... ==============
function initSnapCarouselMobileApple() {
  console.log("[natural1] Mobile => triple-set + transform + toFixed(3) + infinite.");

  const track = document.querySelector(".natural1-carousel-track");
  const container = document.querySelector(".natural1-carousel-container");
  let slides = Array.from(track.querySelectorAll(".natural1-carousel-slide"));

  const prevBtn = document.querySelector(".natural1-carousel-prev");
  const nextBtn = document.querySelector(".natural1-carousel-next");
  const dots = Array.from(document.querySelectorAll(".natural1-carousel-dot"));

  if (!track || !container || slides.length === 0) return;

  // 1) å¤åˆ¶ä¸‰å€
  const original = slides.slice();
  const totalReal = original.length;
  track.innerHTML = "";
  // ç¬¬ä¸€å¥—
  original.forEach(sl => track.appendChild(sl.cloneNode(true)));
  // ä¸­é—´å¥—
  original.forEach(sl => track.appendChild(sl.cloneNode(true)));
  // ç¬¬ä¸‰å¥—
  original.forEach(sl => track.appendChild(sl.cloneNode(true)));
  slides = Array.from(track.querySelectorAll(".natural1-carousel-slide"));
  const totalSlides = slides.length; // = 3 * totalReal

  // 2) è®¡ç®— â€œå•å¼ +gap= pitchâ€
  let containerW = 0, pitch = 0;
  function updateSizes() {
    containerW = container.offsetWidth;
    if (slides.length >= 2) {
      const left1 = slides[0].getBoundingClientRect().left;
      const left2 = slides[1].getBoundingClientRect().left;
      let raw = left2 - left1;
      pitch = parseFloat(raw.toFixed(3));
    } else if (slides[0]) {
      pitch = slides[0].offsetWidth + 15;
    }
  }
  updateSizes();

  let currentIndex = totalReal; // ä¸­é—´å¥—èµ·å§‹
  let currentTranslate = 0;
  const TRANSITION_TIME = 600;

  function setTrackPos(value, withTrans = true) {
    track.style.transition = withTrans
      ? "transform 0.6s cubic-bezier(0.22,1,0.36,1)"
      : "none";
    track.style.transform = `translateX(${value}px)`;
    currentTranslate = value;
  }

  // offset = (containerW - (pitch - 15)) / 2, transform = -(index * pitch) + offset
  function getTargetTranslate(idx) {
    let realW = parseFloat((pitch - 15).toFixed(3));
    let offset = (containerW - realW) / 2;
    offset = parseFloat(offset.toFixed(3));
    let val = -(idx * pitch) + offset;
    return parseFloat(val.toFixed(3));
  }

  function goToIndex(i, anim = true) {
    currentIndex = i;
    let target = getTargetTranslate(i);
    setTrackPos(target, anim);
    updateClasses();
  }

  function getActiveIndexByTranslate() {
    let realW = pitch - 15;
    let offset = (containerW - realW) / 2;
    let approximate = -(currentTranslate - offset) / pitch;
    return Math.round(approximate);
  }
  function mapToRealIndex(i) {
    return i % totalReal;
  }

  function updateClasses() {
    const actI = getActiveIndexByTranslate();
    slides.forEach(s => s.classList.remove("active", "prev", "next", "shadow"));

    if (slides[actI]) slides[actI].classList.add("active");
    const nextI = (actI + 1) % totalSlides;
    const prevI = (actI - 1 + totalSlides) % totalSlides;
    slides[nextI]?.classList.add("next");
    slides[prevI]?.classList.add("prev");

    slides.forEach(s => {
      if (!s.classList.contains("active")) s.classList.add("shadow");
    });

    const dotI = mapToRealIndex(actI);
    dots.forEach((d, i) => {
      d.classList.toggle("active", i === dotI);
    });
  }

  // fixCloneIndex => é˜²æ­¢æœ«å¼ é—ªç™½
  function fixCloneIndex() {
    const actI = getActiveIndexByTranslate();
    if (actI <= 1) {
      currentIndex = actI + totalReal;
      setTrackPos(getTargetTranslate(currentIndex), false);
    } else if (actI >= (2 * totalReal - 1)) {
      currentIndex = (actI - 2 * totalReal) + totalReal;
      setTrackPos(getTargetTranslate(currentIndex), false);
    } else {
      currentIndex = actI;
    }
    updateClasses();
    resetAutoTimer();
  }

  function nextSlide() {
    currentIndex++;
    goToIndex(currentIndex, true);
    setTimeout(() => fixCloneIndex(), TRANSITION_TIME);
    resetAutoTimer();
  }
  function prevSlide() {
    currentIndex--;
    goToIndex(currentIndex, true);
    setTimeout(() => fixCloneIndex(), TRANSITION_TIME);
    resetAutoTimer();
  }

  // è‡ªåŠ¨è½®æ’­
  let autoTimer = setInterval(nextSlide, 5000);
  function resetAutoTimer() {
    clearInterval(autoTimer);
    autoTimer = setInterval(nextSlide, 5000);
  }

  // å·¦å³åˆ‡æ¢æŒ‰é’®
  prevBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    prevSlide();
  });
  nextBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    nextSlide();
  });

  // dots ç‚¹å‡»
  dots.forEach((dot, i) => {
    dot.addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = i + totalReal;
      goToIndex(currentIndex, true);
      setTimeout(() => fixCloneIndex(), TRANSITION_TIME);
      resetAutoTimer();
    });
  });

  // slide ç‚¹å‡»
  slides.forEach(sl => {
    sl.addEventListener("click", (e) => {
      if (sl.classList.contains("active")) {
        // do nothing
      } else if (sl.classList.contains("next")) {
        e.preventDefault();
        nextSlide();
      } else if (sl.classList.contains("prev")) {
        e.preventDefault();
        prevSlide();
      }
    });
    const exploreBtn = sl.querySelector(".natural1-explore-btn");
    if (exploreBtn) {
      exploreBtn.addEventListener("click", (ev) => {
        ev.stopPropagation();
      });
    }
  });

  // ========================== æ–°å¢: ç”¨æˆ·ä¸Šä¸‹æ»‘æ£€æµ‹ ==========================
  let startX = 0,
    startY = 0,
    isDragging = false,
    isVerticalScrolling = false,  // æ ‡è®°çºµå‘æ»šåŠ¨
    dragStart = 0,
    startTime = 0;

  track.style.transition = "none";

  // è§¦æ‘¸å¼€å§‹
  track.addEventListener("touchstart", (e) => {
    if (e.touches.length === 1) {
      isDragging = true;
      isVerticalScrolling = false; // æ¯æ¬¡è§¦å‘æ–°çš„ touchstartï¼Œéƒ½é‡ç½®
      track.style.transition = "none";

      startX = e.touches[0].clientX;
      startY = e.touches[0].clientY;
      dragStart = currentTranslate;
      startTime = Date.now();
    }
  }, { passive: false });

  // è§¦æ‘¸ç§»åŠ¨
  track.addEventListener("touchmove", (e) => {
    if (!isDragging) return;

    const currentX = e.touches[0].clientX;
    const currentY = e.touches[0].clientY;
    const diffX = currentX - startX;
    const diffY = currentY - startY;

    // å¦‚æœå·²ç»åˆ¤å®šçºµå‘æ»šåŠ¨ï¼Œåˆ™è®©æµè§ˆå™¨è‡ªå·±å¤„ç†ä¸Šä¸‹æ»šåŠ¨ï¼Œä¸åšå·¦å³æ‹–æ‹½
    if (isVerticalScrolling) {
      return;
    }

    // å¦‚æœè¿˜æ²¡åˆ¤å®šæ–¹å‘ï¼Œåˆ™åšä¸€æ¬¡æ–¹å‘åˆ¤æ–­
    const absX = Math.abs(diffX);
    const absY = Math.abs(diffY);
    // è®¾ç½®ä¸€ä¸ªå°é˜ˆå€¼ï¼Œæ¯”å¦‚10
    if (absY > absX && absY > 10) {
      // è¯´æ˜ç”¨æˆ·ä¸»è¦åœ¨ä¸Šä¸‹æ»‘ -> æ”¾å¼ƒè½®æ’­æ‹–æ‹½
      isVerticalScrolling = true;
      isDragging = false; 
      return;
    }

    // è‹¥æ¨ªå‘ä¸ºä¸» -> é˜»æ­¢é»˜è®¤æ»šåŠ¨ï¼Œè®©è½®æ’­è·Ÿéšæ‰‹æŒ‡å·¦å³æ‹–æ‹½
    e.preventDefault();
    track.style.transform = `translateX(${dragStart + diffX}px)`;
    currentTranslate = dragStart + diffX;
  }, { passive: false });

  // è§¦æ‘¸ç»“æŸ
  track.addEventListener("touchend", (e) => {
    if (!isDragging) return;
    isDragging = false;

    // å¦‚æœå·²åˆ¤å®šæ˜¯çºµå‘æ»šåŠ¨ï¼Œå°±ä¸æ‰§è¡Œè½®æ’­åˆ‡æ¢
    if (isVerticalScrolling) {
      return;
    }

    track.style.transition = "transform 0.6s cubic-bezier(0.22,1,0.36,1)";
    const dist = e.changedTouches[0].clientX - startX;
    const elapsed = Date.now() - startTime;
    const speed = dist / elapsed;

    if (Math.abs(dist) > 10) {
      if (speed < -0.5) {
        nextSlide();
        return;
      } else if (speed > 0.5) {
        prevSlide();
        return;
      }
      if (dist < 0) {
        nextSlide();
      } else {
        prevSlide();
      }
    } else {
      // å¦‚æœæ»‘åŠ¨å¾ˆå°ï¼Œå°±å›åˆ°å½“å‰
      goToIndex(currentIndex, true);
      setTimeout(() => fixCloneIndex(), TRANSITION_TIME);
      resetAutoTimer();
    }
  }, { passive: false });

  // çª—å£å°ºå¯¸å˜åŒ–
  window.addEventListener("resize", () => {
    updateSizes();
    let val = getTargetTranslate(currentIndex);
    setTrackPos(val, false);
    fixCloneIndex();
  });

  function init() {
    updateSizes();
    let val = getTargetTranslate(currentIndex);
    setTrackPos(val, false);
    updateClasses();
  }
  init();
}



  // ============== 4) æ¡Œé¢ç«¯ => é¦–å°¾å…‹éš† + scroll-snap + åˆ°å¯è§†åŒºæ‰å¯åŠ¨ ==============
 function initSnapCarouselDesktopWithObserver(){
  console.log("[natural1-desktop] scroll-snap + clone + no jump + intersectionObserver start.");

  const container = document.querySelector(".natural1-carousel-container");
  const track     = container.querySelector(".natural1-carousel-track");
  let slides      = Array.from(track.querySelectorAll(".natural1-carousel-slide"));
  if(!slides.length){
    console.warn("[natural1-desktop] no slides found!");
    return;
  }

  const prevBtn = document.querySelector(".natural1-carousel-prev");
  const nextBtn = document.querySelector(".natural1-carousel-next");
  const dots    = Array.from(document.querySelectorAll(".natural1-carousel-dot"));

  // A) é¦–å°¾å…‹éš†
  const totalReal= slides.length;
  const firstClone= slides[0].cloneNode(true);
  const lastClone = slides[slides.length-1].cloneNode(true);
  track.appendChild(firstClone);
  track.insertBefore(lastClone, slides[0]);
  slides= Array.from(track.querySelectorAll(".natural1-carousel-slide"));

  // B) å½“å‰ç´¢å¼•=1 => ç¬¬ä¸€å¼ çœŸå®
  let currentIndex= 1;
  let scrollTimer= null;
  let autoTimer= null; // è‡ªåŠ¨æ’­æ”¾å®šæ—¶å™¨

  // C) scroll-snap
  container.style.overflowX      = "auto";
  container.style.scrollSnapType = "x mandatory";
  container.style.scrollBehavior = "smooth";

  slides.forEach(sl=>{
    sl.style.scrollSnapAlign= "center";
    // å…¶ä»– CSS è§†éœ€
  });

  // D) setInitialPos => è‹¥åœ¨è§†å£åˆ™æ»šåˆ° index=1
  function setInitialPos(){
    if(isInViewport(container)){
      track.style.scrollBehavior="auto";
      slides[1].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    }
  }
  setInitialPos();

  // E) æ‰¾åˆ°æœ€æ´»è·ƒslide => è·å®¹å™¨ä¸­å¿ƒæœ€è¿‘
  function getActiveIndex(){
    const cRect= container.getBoundingClientRect();
    const cCenter= cRect.left + cRect.width/2;
    let minDiff= Infinity, foundI=1;
    slides.forEach((sl,i)=>{
      const r= sl.getBoundingClientRect();
      const sCenter= r.left + r.width/2;
      const diff= Math.abs(sCenter- cCenter);
      if(diff< minDiff){
        minDiff= diff;
        foundI= i;
      }
    });
    return foundI;
  }

  // F) updateClasses => active, next, prev, dots
  function updateClasses(){
    const actI= getActiveIndex();
    slides.forEach(s=> s.classList.remove("active","prev","next","shadow"));
    slides[actI]?.classList.add("active");
    const nextI= (actI+1)%slides.length;
    const prevI= (actI-1+ slides.length)% slides.length;
    slides[nextI]?.classList.add("next");
    slides[prevI]?.classList.add("prev");
    slides.forEach(s=>{
      if(!s.classList.contains("active")){
        s.classList.add("shadow");
      }
    });
    // dots => 0 => totalReal-1, last => 0
    let dotIndex;
    if(actI===0){
      dotIndex= totalReal-1;
    } else if(actI=== slides.length-1){
      dotIndex=0;
    } else {
      dotIndex= actI-1;
    }
    dots.forEach((d,i)=>{
      d.classList.toggle("active", i=== dotIndex);
    });
  }

  // G) fixCloneIndex => è‹¥ actI=0 => è·³åˆ° totalReal, actI=slides.length-1 => è·³åˆ°1
  function fixCloneIndex(){
    const actI= getActiveIndex();
    if(actI===0){
      if(isInViewport(container)){
        currentIndex= totalReal;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex= totalReal;
      }
    } else if(actI=== slides.length-1){
      if(isInViewport(container)){
        currentIndex=1;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex=1;
      }
    } else {
      currentIndex= actI;
    }
    updateClasses();
  }

  // H) scroll => é˜²æŠ– => fixCloneIndex
  track.addEventListener("scroll",()=>{
    if(scrollTimer) clearTimeout(scrollTimer);
    scrollTimer= setTimeout(()=>{
      fixCloneIndex();
      updateClasses();
    },150);
  });

  // I) autoTimer => only +1 => no skip
  let autoplayInterval= 5000;

  function nextSlide(){
    if(!isInViewport(container)){
      stopAutoTimer();
      return;
    }
    if(currentIndex=== slides.length-2){
      // åˆ°æœ€åçœŸå® => å›åˆ°1
      track.style.scrollBehavior="auto";
      currentIndex=1;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex++;
      scrollToIndex(currentIndex,true);
    }
  }
  function prevSlide(){
    if(!isInViewport(container)){
      stopAutoTimer();
      return;
    }
    if(currentIndex===1){
      track.style.scrollBehavior="auto";
      currentIndex= totalReal;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex--;
      scrollToIndex(currentIndex,true);
    }
  }
  function scrollToIndex(i, smooth=true){
    if(i<0) i=0;
    if(i>= slides.length) i= slides.length-1;
    const target= slides[i];
    if(!target) return;
    if(isInViewport(container)){
      track.style.scrollBehavior= smooth?"smooth":"auto";
      target.scrollIntoView({
        behavior: smooth?"smooth":"auto",
        block:"nearest",
        inline:"center"
      });
    } else {
      currentIndex= i;
    }
  }
  function stopAutoTimer(){
    clearInterval(autoTimer);
    autoTimer= null;
  }
  function startAutoTimer(){
    if(!autoTimer){
      autoTimer= setInterval(nextSlide, autoplayInterval);
    }
  }
  function resetAutoTimer(){
    stopAutoTimer();
    startAutoTimer();
  }

  // J) æŒ‰é’® / dots
  prevBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    prevSlide();
    resetAutoTimer();
  });
  nextBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    nextSlide();
    resetAutoTimer();
  });
  dots.forEach((dot,i)=>{
    dot.addEventListener("click",(e)=>{
      e.stopPropagation();
      currentIndex= i+1;
      scrollToIndex(currentIndex,true);
      resetAutoTimer();
    });
  });
  slides.forEach((slide)=>{
    slide.addEventListener("click",(e)=>{
      if(slide.classList.contains("active")){
        // do nothing
      } else if(slide.classList.contains("next")){
        e.preventDefault();
        nextSlide();
        resetAutoTimer();
      } else if(slide.classList.contains("prev")){
        e.preventDefault();
        prevSlide();
        resetAutoTimer();
      }
    });
    const exploreBtn= slide.querySelector(".natural1-explore-btn");
    if(exploreBtn){
      exploreBtn.addEventListener("click",(ev)=> ev.stopPropagation());
    }
  });

  // K) visibilitychange/pageshow => ä¸è·³é¡µ
  document.addEventListener("visibilitychange", handleVisibilityChange);
  window.addEventListener("pageshow", handlePageShow);

  function handleVisibilityChange(){
    if(!document.hidden){
      // å›åˆ°å‰å° => è‹¥ autoTimerä¸ºç©º && å®¹å™¨åœ¨ viewport ä¸­ => start
      // â˜… æ–°å¢ï¼šå¦‚æœæ­¤æ—¶ natural1 ä¹Ÿâ€œå±…ä¸­æˆ–é™„è¿‘â€ï¼Œäº¦å¯æ‰§è¡Œ startAutoTimer
      if(!autoTimer){
        // 1) è‡ªå¸¦æ¡ä»¶ï¼šåªè¦æœ‰ä¸€éƒ¨åˆ†åœ¨å¯è§†åŒºå°±å¼€å§‹
        if(isInViewport(container)){
          startAutoTimer();
        }
        // 2) å¦‚æœæƒ³æ›´ä¸¥æ ¼ï¼Œè®©â€œåœ¨å¯è§†åŒºâ€ + â€œæ­£å¥½åœ¨é¡µé¢ä¸­å¿ƒâ€æ‰æ¢å¤ï¼š
        // if(isCenteredInViewport(container)){
        //   startAutoTimer();
        // }
      }
      // ä¿®æ­£å…‹éš†å¹¶è‡ªåŠ¨æ»šå›ä¹‹å‰çš„ä½ç½®
      fixCloneIndex();
      track.style.scrollBehavior="auto";
      slides[currentIndex].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    } else {
      // ç¦»å¼€ => stop
      stopAutoTimer();
    }
  }

  function handlePageShow(e){
    if(e.persisted){
      // bfcache
      fixCloneIndex();
      track.style.scrollBehavior="auto";
      slides[currentIndex].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    }
  }

  // L) IntersectionObserver => å½“ç”¨æˆ·åˆ’åˆ° natural1 åŒºåŸŸ => start auto
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        startAutoTimer();
      } else {
        stopAutoTimer();
      }
    });
  }, { threshold: 0.1 }); 
  observer.observe(container);

  // M) åˆå§‹åŒ–
  function init(){
    track.style.scrollBehavior="auto";
    scrollToIndex(currentIndex,false);
    track.style.scrollBehavior="smooth";
    updateClasses();
  }
  init();

  window.addEventListener("resize", ()=>{
    fixCloneIndex();
    updateClasses();
  });

}

/** ============== å·¥å…·å‡½æ•°: isInViewport ============== **/
function isInViewport(elem){
  if(!elem) return false;
  const rect= elem.getBoundingClientRect();
  return (rect.top< window.innerHeight && rect.bottom>=0);
}

/**
 * ============== æ–°å¢ç¤ºä¾‹å‡½æ•°: isCenteredInViewport ==============
 * å¦‚æœä½ æƒ³æ›´ç²¾å‡†åœ°åˆ¤æ–­ natural1 è½®æ’­åŒºæ˜¯å¦â€œæ°å¥½â€å±…ä¸­æˆ–åœ¨ä¸­å¿ƒé™„è¿‘ï¼Œ
 * å¯ä»¥å®šä¹‰ä¸€ä¸ªé˜ˆå€¼ï¼Œæ¯”å¦‚è·ç¦»æµè§ˆå™¨å‚ç›´ä¸­çº¿ 100px ä»¥å†…ç®—æ˜¯â€œåœ¨ä¸­å¿ƒâ€ã€‚
 * å…·ä½“å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è‡ªç”±è°ƒæ•´ã€‚
 */
function isCenteredInViewport(elem){
  if(!elem) return false;
  const rect = elem.getBoundingClientRect();
  const windowHeight = window.innerHeight;
  // è®¡ç®—å®¹å™¨çš„å‚ç›´ä¸­ç‚¹
  const containerCenter = rect.top + rect.height / 2;
  // æµè§ˆå™¨è§†å£ä¸­ç‚¹
  const viewportCenter  = windowHeight / 2;
  // é˜ˆå€¼ï¼Œæ¯”å¦‚ä¸Šä¸‹ 100 åƒç´ éƒ½è®¤ä¸ºåœ¨ä¸­å¿ƒåŒºåŸŸ
  const threshold = 100; 
  return Math.abs(containerCenter - viewportCenter) <= threshold;
}

})();


  /***********************
   * è„šæœ¬Cï¼šæœç´¢é€»è¾‘
   ***********************/
  (function(){
    const body          = document.body;
    const mainHeader    = document.getElementById('mainHeader');
    const desktopSearch = document.getElementById('desktopSearchIcon');
    const mobileSearch  = document.getElementById('mobileSearchIcon');
    const searchPanel   = document.getElementById('searchPanel');
    const searchClose   = document.getElementById('searchClose');
    const searchTitle   = document.getElementById('searchTitle');
    const searchResults = document.getElementById('searchResults');

    // æ¨¡æ‹Ÿæœ¬ç½‘ç«™å¯æœç´¢å†…å®¹ (ç¤ºä¾‹)
    const siteContents = [
      { text: "About MeFan", url: "about.html" },
      { text: "MeFan Lite - Wireless Earbuds", url: "product-lite.html" },
      { text: "MeFan X1 - Noise Canceling Headphones", url: "product-x1.html" },
      { text: "MeFan Pro - Premium Audio", url: "product-pro.html" },
      { text: "Earbud Tips & Support", url: "support.html" },
      { text: "Contact Us", url: "contact.html" },
      { text: "Products Overview", url: "products.html" }
    ];

    function openSearch() {
      body.classList.add('search-open');
      searchTitle.textContent = "";
      searchResults.innerHTML = "";
    }
    function closeSearch() {
      body.classList.remove('search-open');
    }

    if (desktopSearch) desktopSearch.addEventListener('click', openSearch);
    if (mobileSearch)  mobileSearch.addEventListener('click', openSearch);
    if (searchClose)   searchClose.addEventListener('click', closeSearch);

    document.addEventListener('keydown', function(e){
      if (e.key === "Escape") {
        closeSearch();
      }
    });

    document.addEventListener('click', function(e){
      // è‹¥ç‚¹å‡»åœ¨ searchPanel å¤–éƒ¨ï¼Œä¸”ä¸æ˜¯æœç´¢å›¾æ ‡ï¼Œå°±å…³é—­
      if (!searchPanel.contains(e.target)
          && e.target !== desktopSearch
          && e.target !== mobileSearch) {
        closeSearch();
      }
    });

    // å½“ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒåŠ¨æ€ç”Ÿæˆæœç´¢ç»“æœ
    if (searchTitle && searchResults) {
      searchTitle.addEventListener('input', function(){
        const query = searchTitle.innerText.trim().toLowerCase();
        if (!query) {
          searchResults.innerHTML = "";
          return;
        }
        const matched = siteContents.filter(item =>
          item.text.toLowerCase().includes(query)
        );
        searchResults.innerHTML = "";
        if (matched.length > 0) {
          matched.forEach(obj => {
            const div = document.createElement('div');
            div.classList.add('search-item');
            // ç”¨ <a> é“¾æ¥å®ç°çœŸå®è·³è½¬
            const link = document.createElement('a');
            link.href = obj.url;
            link.textContent = obj.text;
            link.style.textDecoration = "none";
            link.style.color = "#333";
            link.target = "_self";
            div.appendChild(link);
            searchResults.appendChild(div);
          });
        } else {
          const noRes = document.createElement('div');
          noRes.classList.add('no-result');
          noRes.textContent = "Sorry, no results found.";
          searchResults.appendChild(noRes);
        }
      });
    }
  })();


  /************************************
   * è„šæœ¬Dï¼šç§»åŠ¨ç«¯èœå•é€»è¾‘ (åŸºç¡€)
   ************************************/
  (function () {
    const menuIcon  = document.getElementById('menuIcon');
    const closeBtn  = document.getElementById('closeBtn');
    const mobileNav = document.getElementById('mobileNav');

    if (menuIcon && closeBtn && mobileNav) {
      menuIcon.addEventListener('click', () => {
        mobileNav.classList.add('active');
      });
      closeBtn.addEventListener('click', () => {
        mobileNav.classList.remove('active');
      });
      document.querySelectorAll('#mobileNav ul li a').forEach(link => {
        link.addEventListener('click', () => {
          // ç‚¹å‡»ä»»æ„é“¾æ¥åå…³é—­èœå•
          mobileNav.classList.remove('active');
        });
      });
    }
  })();


  /***************************************
   * è„šæœ¬Eï¼šæ ¸å¿ƒä»·å€¼ä¸‹æ‹‰ç®­å¤´
   ***************************************/
  (function () {
    document.querySelectorAll(".core-value-item h3").forEach(item => {
      item.addEventListener("click", function () {
        let content = this.nextElementSibling;
        let arrow   = this.querySelector(".dropdown-arrow");
        // åˆ‡æ¢å½“å‰ç‚¹å‡»é¡¹çš„å±•å¼€/æ”¶èµ·
        if (content.style.display === "block") {
          content.style.display = "none";
          arrow.textContent = "\u2304"; // ä¸‹ç®­å¤´
          this.classList.remove("active");
        } else {
          content.style.display = "block";
          arrow.textContent = "\u2303"; // ä¸Šç®­å¤´
          this.classList.add("active");
        }
        // å…³é—­å…¶ä»–å·²å±•å¼€çš„ä¸‹æ‹‰é¡¹
        document.querySelectorAll(".core-value-item.active").forEach(other => {
          if (other !== this) {
            other.querySelector("ul").style.display = "none";
            let otherArrow = other.querySelector(".dropdown-arrow");
            if (otherArrow) {
              otherArrow.textContent = "\u2304"; // ä¸‹ç®­å¤´
            }
            other.classList.remove("active");
          }
        });
      });
    });
  })();


  /***************************************
   * è„šæœ¬Fï¼šç¤¾äº¤åª’ä½“ & å¸§åŠ¨ç”»
   ***************************************/
  (function () {
    if (typeof initFrameAnimation === "function") {
      initFrameAnimation();
    }
    initContactButtons();
    function initContactButtons() {
      const playPauseButton  = document.getElementById("playPauseButton");
      const contactContainer = document.getElementById("info1-contact-container");

      if (!playPauseButton || !contactContainer) {
        console.warn("âŒ playPauseButton æˆ– info1-contact-container æœªæ‰¾åˆ°ï¼");
        return;
      }

      function updateContactPosition() {
        const buttonRect = playPauseButton.getBoundingClientRect();
        contactContainer.style.top   = `${buttonRect.bottom + 12}px`;
        contactContainer.style.right = `${window.innerWidth - buttonRect.right}px`;
      }

      window.addEventListener("resize", updateContactPosition);

      new MutationObserver(updateContactPosition).observe(playPauseButton, { 
        attributes: true, 
        childList: true, 
        subtree: true 
      });

      updateContactPosition();
    }
  })();


  /*****************************************
   * è„šæœ¬Gï¼šæ¡Œé¢å¯¼èˆªæ æ‚¬åœ (Desktop Nav Hover)
   *****************************************/
  (function(){
    const header         = document.getElementById('mainHeader');
    const navLinks       = document.querySelectorAll('.desktop-nav .nav-list > li > a');
    const hoverOverlay   = document.getElementById('hover1Overlay');
    const hoverContent   = document.getElementById('hover1Content');
    const blurBg         = document.getElementById('blur1Bg'); // æ¨¡ç³ŠèƒŒæ™¯å±‚

    const sectionsMap = {
      'Home':     document.getElementById('hover1Home'),
      'Products': document.getElementById('hover1Products'),
      'About':    document.getElementById('hover1About'),
      'Contact':  document.getElementById('hover1Contact')
    };

    function hideAllSections() {
      Object.values(sectionsMap).forEach(sec => sec && sec.classList.remove('active'));
    }

    function showHover() {
      hoverOverlay.classList.add('active');
      hoverContent.classList.add('active');
      header.classList.add('nav-white'); // å¯¼èˆªå˜ç™½
      if (blurBg) blurBg.classList.add('active'); // æ˜¾ç¤ºæ¨¡ç³ŠèƒŒæ™¯
    }

    function hideHover() {
      hoverOverlay.classList.remove('active');
      hoverContent.classList.remove('active');
      header.classList.remove('nav-white');
      if (blurBg) blurBg.classList.remove('active'); // éšè—æ¨¡ç³ŠèƒŒæ™¯
      hideAllSections();
    }

    // é¼ æ ‡ç§»åˆ°å¯¼èˆªé“¾æ¥ => æ˜¾ç¤ºå¯¹åº”æ‚¬åœé¢æ¿
    navLinks.forEach(link => {
      link.addEventListener('mouseenter', () => {
        const text = link.textContent.trim();
        hideAllSections();
        if (sectionsMap[text]) {
          sectionsMap[text].classList.add('active');
          showHover();
        } else {
          hideHover();
        }
      });
    });

    // é¼ æ ‡ç¦»å¼€æ‚¬åœé¢æ¿ => å…³é—­
    hoverContent.addEventListener('mouseleave', () => {
      hideHover();
    });

    // é¼ æ ‡ç§»åŠ¨åˆ°é®ç½©å±‚ => å…³é—­
    hoverOverlay.addEventListener('mousemove', () => {
      hideHover();
    });

    // é¼ æ ‡ç¦»å¼€æ¨¡ç³ŠèƒŒæ™¯å±‚ => å…³é—­
    if (blurBg) {
      blurBg.addEventListener('mousemove', () => {
        hideHover();
      });
    }
  })();


  /**********************************************
   * è„šæœ¬Hï¼šç§»åŠ¨ç«¯å¤šçº§èœå• (è‹¥éœ€è¦)
   **********************************************/
  (function(){
    const mobileNav     = document.getElementById('mobileNav');
    const homePanel     = document.getElementById('mobileNavLevel2Home');
    const productsPanel = document.getElementById('mobileNavLevel2Products');
    const aboutPanel    = document.getElementById('mobileNavLevel2About');
    const contactPanel  = document.getElementById('mobileNavLevel2Contact');

    // è‹¥è¿™äº›é¢æ¿ä¸å­˜åœ¨ï¼Œå°±è·³è¿‡
    if (!mobileNav || !homePanel || !productsPanel || !aboutPanel || !contactPanel) {
      console.log("å¤šçº§èœå•é¢æ¿æœªæ‰¾åˆ°ï¼Œè‹¥ä¸éœ€è¦æ­¤åŠŸèƒ½å¯åˆ é™¤æœ¬è„šæœ¬ã€‚");
      return;
    }

    function showSubPanel(panel){
      mobileNav.classList.remove('active');
      homePanel.classList.remove('active');
      productsPanel.classList.remove('active');
      aboutPanel.classList.remove('active');
      contactPanel.classList.remove('active');
      panel.classList.add('active');
    }
    function showMainNav(){
      homePanel.classList.remove('active');
      productsPanel.classList.remove('active');
      aboutPanel.classList.remove('active');
      contactPanel.classList.remove('active');
      mobileNav.classList.add('active');
    }
    const navLinks = mobileNav.querySelectorAll('ul li a');
    navLinks.forEach(link => {
      const level = link.getAttribute('data-level');
      if(level === 'home'){
        link.addEventListener('click', function(e){
          e.preventDefault();
          showSubPanel(homePanel);
        });
      } else if(level === 'products'){
        link.addEventListener('click', function(e){
          e.preventDefault();
          showSubPanel(productsPanel);
        });
      } else if(level === 'about'){
        link.addEventListener('click', function(e){
          e.preventDefault();
          showSubPanel(aboutPanel);
        });
      } else if(level === 'contact'){
        link.addEventListener('click', function(e){
          e.preventDefault();
          showSubPanel(contactPanel);
        });
      }
    });
    const backButtons = document.querySelectorAll('.menu-panel__back');
    backButtons.forEach(btn => {
      btn.addEventListener('click', function(e){
        e.preventDefault();
        showMainNav();
      });
    });
    const subCloseButtons = document.querySelectorAll('.menu-panel__close');
    subCloseButtons.forEach(btn => {
      btn.addEventListener('click', function(e){
        e.preventDefault();
        mobileNav.classList.remove('active');
        homePanel.classList.remove('active');
        productsPanel.classList.remove('active');
        aboutPanel.classList.remove('active');
        contactPanel.classList.remove('active');
      });
    });
  })();
<!-- å»ºè®®åœ¨åº•éƒ¨æˆ–ä½¿ç”¨ <defer> -->
  /************************************
   * è„šæœ¬Iï¼šdemo1 è½®æ’­ (å«å±€éƒ¨ waitImagesLoaded)
   ************************************/
  (function () {
    // I1) ç­‰å¾…å›¾ç‰‡åŠ è½½
    function waitImagesLoadedDemo1(images, callback) {
      let loadedCount = 0;
      const total = images.length;
      function checkDone() {
        loadedCount++;
        if (loadedCount >= total) {
          callback();
        }
      }
      images.forEach((img) => {
        if (img.complete) {
          checkDone();
        } else {
          img.addEventListener("load", checkDone);
          img.addEventListener("error", checkDone);
        }
      });
      if (total === 0) callback();
    }

    function initdemo1CarouselTrack() {
      const container = document.querySelector(".demo1-carousel-container");
      const track = document.querySelector(".demo1-carousel-track");
      let slides = Array.from(document.querySelectorAll(".demo1-carousel-slide"));
      const prevBtn = document.querySelector(".demo1-carousel-prev");
      const nextBtn = document.querySelector(".demo1-carousel-next");
      const dots = Array.from(document.querySelectorAll(".demo1-carousel-dot"));

      if (!container || !track || slides.length === 0 || dots.length === 0) return;

      const totalReal = slides.length;
      let isAnimating = false;
      let currentIndex = 1;
      let slideWidth = 0;
      let gapWidth = 0;

      // ========== 1) å…‹éš†é¦–å°¾å¹»ç¯ç‰‡ ==========
      const firstClone = slides[0].cloneNode(true);
      const lastClone = slides[totalReal - 1].cloneNode(true);
      track.appendChild(firstClone);
      track.insertBefore(lastClone, track.firstChild);

      slides = Array.from(track.querySelectorAll(".demo1-carousel-slide"));

      // ========== 2) è®¡ç®—å®½åº¦ & transform åç§» ==========
      function updateSlideWidth() {
        if (window.innerWidth <= 768) {
          const containerWidth = container.offsetWidth;
          gapWidth = containerWidth * 0.04;
          slides.forEach((slide) => {
            slide.style.width = `${containerWidth * 0.75}px`;
          });
          slideWidth = containerWidth * 0.75 + gapWidth;
        } else {
          slides.forEach((slide) => {
            slide.style.width = "";
          });
          gapWidth = 15;
          slideWidth = slides[1].getBoundingClientRect().width + gapWidth;
        }
      }

      // ========== 3) æ›´æ–°è½®æ’­çŠ¶æ€ï¼šå·¦å³å¯è§éƒ¨åˆ†å¯¹ç§°å¤„ç† ==========
      function updateCarousel(animated = true) {
        updateSlideWidth();
        track.style.transition = animated ? "transform 0.5s ease-in-out" : "none";

        if (window.innerWidth <= 768) {
          track.style.transform = `translateX(${-currentIndex * slideWidth + gapWidth / 2}px)`;
        } else {
          track.style.transform = `translateX(${-currentIndex * slideWidth}px)`;
        }

        let dotIndex =
          currentIndex === 0
            ? totalReal - 1
            : currentIndex === slides.length - 1
            ? 0
            : currentIndex - 1;
        dots.forEach((dot, i) => dot.classList.toggle("active", i === dotIndex));

        slides.forEach((sl) => sl.classList.remove("active", "prev", "next", "shadow"));
        slides[currentIndex].classList.add("active");

        const nextIndex = (currentIndex + 1) % slides.length;
        const prevIndex = (currentIndex - 1 + slides.length) % slides.length;
        slides[nextIndex].classList.add("next");
        slides[prevIndex].classList.add("prev");

        slides.forEach((slide) => {
          if (!slide.classList.contains("active")) {
            slide.classList.add("shadow");
          }
        });

        slides.forEach((slide) => {
          const link = slide.querySelector("a");
          if (link) {
            link.style.pointerEvents = slide.classList.contains("active") ? "auto" : "none";
          }
        });

        document.querySelectorAll(".demo1-explore-btn").forEach((btn) => {
          btn.style.opacity = "0";
          btn.style.pointerEvents = "none";
        });
        const activeBtn = slides[currentIndex].querySelector(".demo1-explore-btn");
        if (activeBtn) {
          activeBtn.style.opacity = "1";
          activeBtn.style.pointerEvents = "auto";
        }
      }

      // ========== 4) åˆ‡æ¢å‡½æ•° ==========
      function nextSlide() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex++;
        updateCarousel();
        setTimeout(() => {
          if (currentIndex === slides.length - 1) {
            track.style.transition = "none";
            currentIndex = 1;
            updateCarousel(false);
          }
          isAnimating = false;
        }, 500);
      }

      function prevSlide() {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex--;
        updateCarousel();
        setTimeout(() => {
          if (currentIndex === 0) {
            track.style.transition = "none";
            currentIndex = slides.length - 2;
            updateCarousel(false);
          }
          isAnimating = false;
        }, 500);
      }

      function jumpToSlide(index) {
        if (isAnimating) return;
        isAnimating = true;
        currentIndex = index + 1;
        updateCarousel();
        setTimeout(() => {
          isAnimating = false;
        }, 500);
      }

      // ========== 5) è‡ªåŠ¨æ’­æ”¾ ==========
      let interval = setInterval(nextSlide, 5000);
      function resetInterval() {
        clearInterval(interval);
        interval = setInterval(nextSlide, 5000);
      }

      // ========== 6) ç‚¹å‡»äº‹ä»¶ç»‘å®š ==========
      prevBtn?.addEventListener("click", (e) => {
        e.stopPropagation();
        prevSlide();
        resetInterval();
      });
      nextBtn?.addEventListener("click", (e) => {
        e.stopPropagation();
        nextSlide();
        resetInterval();
      });

      dots.forEach((dot, i) => {
        dot.addEventListener("click", (e) => {
          e.stopPropagation();
          jumpToSlide(i);
          resetInterval();
        });
      });

      slides.forEach((slide) => {
        slide.addEventListener("click", (e) => {
          if (slide.classList.contains("active")) {
            return;
          } else if (slide.classList.contains("next")) {
            e.preventDefault();
            nextSlide();
            resetInterval();
          } else if (slide.classList.contains("prev")) {
            e.preventDefault();
            prevSlide();
            resetInterval();
          }
        });

        // è‹¥æœ‰ .demo1-explore-btnï¼Œåˆ™é˜»æ­¢å†’æ³¡ï¼Œç¡®ä¿å¯ç‚¹
        const exploreBtn = slide.querySelector(".demo1-explore-btn");
        if (exploreBtn) {
          exploreBtn.addEventListener("click", (ev) => {
            ev.stopPropagation();
          });
        }
      });

      // ========== 8) æ‰‹æœºç«¯è§¦æ‘¸æ»‘åŠ¨æ›´çµæ•(é˜ˆå€¼=20px) ==========
      let startX = 0;
      let isSwiping = false;
      track.addEventListener(
        "touchstart",
        (e) => {
          if (e.touches.length === 1) {
            startX = e.touches[0].clientX;
            isSwiping = true;
          }
        },
        { passive: true }
      );
      track.addEventListener("touchmove", () => {}, { passive: true });
      track.addEventListener(
        "touchend",
        (e) => {
          if (!isSwiping) return;
          isSwiping = false;
          const endX = e.changedTouches[0].clientX;
          const diff = endX - startX;
          // 20pxé˜ˆå€¼ => æ›´å®¹æ˜“è§¦å‘
          if (Math.abs(diff) > 20) {
            if (diff < 0) {
              nextSlide();
            } else {
              prevSlide();
            }
            resetInterval();
          }
        },
        { passive: true }
      );

      // ========== 8) åˆå§‹åŒ– + ç›‘å¬çª—å£å˜åŒ– ==========
      window.addEventListener("resize", updateCarousel);

      track.style.transition = "none";
      updateCarousel(false);
      setTimeout(() => {
        track.style.transition = "transform 0.5s ease-in-out";
      }, 50);

      if (window.innerWidth <= 768) {
        prevBtn.style.display = "block";
        nextBtn.style.display = "block";
      } else {
        prevBtn.style.display = "none";
        nextBtn.style.display = "none";
      }

      track.addEventListener("transitionend", () => {
        isAnimating = false;
      });
    }

    // ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œå†åˆå§‹åŒ–
    const slideImgs = Array.from(document.querySelectorAll(".demo1-carousel-slide img"));
    waitImagesLoadedDemo1(slideImgs, () => {
      initdemo1CarouselTrack();
    });
  })();




(function(){
  // 1) è·å– natural2 å®¹å™¨ & ç­‰å›¾åŠ è½½
  const container = document.querySelector(".natural2-carousel-container");
  if(!container) return;

  container.style.visibility = "hidden";
  const track = container.querySelector(".natural2-carousel-track");
  let slides = track ? Array.from(track.querySelectorAll(".natural2-carousel-slide")) : [];
  if(!track || !slides.length){
    console.warn("[natural2] container/track/slides not found!");
    return;
  }

  const prevBtn = document.querySelector(".natural2-carousel-prev");
  const nextBtn = document.querySelector(".natural2-carousel-next");
  const dots    = Array.from(document.querySelectorAll(".natural2-carousel-dot"));

  // æ”¶é›†æ‰€æœ‰å›¾
  const allImgs= Array.from(track.querySelectorAll("img"));
  waitImagesLoadedNatural2(allImgs, ()=>{
    container.style.visibility= "visible";
    const isMobile= (window.innerWidth<=768);
    if(isMobile){
      initSnapCarouselMobile_N2(); // ç§»åŠ¨ç«¯ => ä¸å˜
    } else {
      initSnapCarouselDesktopOptimized_N2(); // æ¡Œé¢ç«¯ => æ–°å‡½æ•°å
    }
  });

  // ç­‰å›¾ç‰‡åŠ è½½
  function waitImagesLoadedNatural2(images, callback){
    let loaded=0;
    const total= images.length;
    if(!total){
      callback();
      return;
    }
    images.forEach(img=>{
      if(img.complete){
        checkDone();
      } else {
        img.addEventListener("load", checkDone);
        img.addEventListener("error", checkDone);
      }
    });
    function checkDone(){
      loaded++;
      if(loaded>= total){
        callback();
      }
    }
  }

  // ============== ç§»åŠ¨ç«¯ => è‡ªåŠ¨æ»šåŠ¨æ’­æ”¾é›†æˆ ==============
function initSnapCarouselMobile_N2(){
  console.log("[natural2-mobile] auto-play mobile logic.");
  const totalReal = slides.length;

  // 1) é¦–å°¾å…‹éš†
  const firstClone = slides[0].cloneNode(true);
  const lastClone  = slides[slides.length -1].cloneNode(true);
  track.appendChild(firstClone);
  track.insertBefore(lastClone, slides[0]);
  slides = Array.from(track.querySelectorAll(".natural2-carousel-slide"));

  // å½“å‰ç´¢å¼• => 1 (ç¬¬ä¸€å¼ çœŸå®)
  let currentIndex = 1;
  let scrollTimer  = null; // scrolläº‹ä»¶é˜²æŠ–
  let autoTimer    = null; // â€”â€” æ–°å¢ï¼šè‡ªåŠ¨æ’­æ”¾å®šæ—¶å™¨
  const autoplayInterval = 5000; // â€”â€” æ–°å¢ï¼š5ç§’è‡ªåŠ¨åˆ‡æ¢

  // 2) åŸºæœ¬ scroll-snap è®¾ç½®
  container.style.overflowX      = "auto";
  container.style.scrollSnapType = "x mandatory"; // or proximity
  container.style.scrollBehavior = "smooth";       // åªèƒ½è°ƒå¤§/å° å¾ˆæœ‰é™

  slides.forEach(sl=>{
    sl.style.scrollSnapAlign = "center";
    // sl.style.display        = "inline-block"; // éœ€è¦åˆ™åŠ 
    // sl.style.width          = "..."           // éœ€è¦åˆ™åŠ 
  });

  // 3) setInitialPos => è‹¥å¯è§ => æ»šåˆ° index=1
  function setInitialPos(){
    if(isInViewport(container)){
      track.style.scrollBehavior="auto";
      slides[1].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center" });
      track.style.scrollBehavior="smooth";
    }
  }
  setInitialPos();

  // 4) è·å–æ´»è·ƒslide => è·å®¹å™¨ä¸­å¿ƒæœ€è¿‘
  function getActiveIndex(){
    const cRect  = container.getBoundingClientRect();
    const cCenter= cRect.left + cRect.width/2;
    let minDiff= Infinity, foundI=1;
    slides.forEach((sl,i)=>{
      const r= sl.getBoundingClientRect();
      const sCenter= r.left + r.width/2;
      const diff= Math.abs(sCenter- cCenter);
      if(diff< minDiff){
        minDiff= diff;
        foundI= i;
      }
    });
    return foundI;
  }

  // 5) updateClasses => active, dots
  function updateClasses(){
    const actI= getActiveIndex();
    slides.forEach(s => s.classList.remove("active","prev","next","shadow"));
    slides[actI]?.classList.add("active");
    const nextI= (actI+1)% slides.length;
    const prevI= (actI-1+ slides.length)% slides.length;
    slides[nextI]?.classList.add("next");
    slides[prevI]?.classList.add("prev");
    slides.forEach(s=>{
      if(!s.classList.contains("active")){
        s.classList.add("shadow");
      }
    });
    // dots => 0 => totalReal-1, last => 0
    let dotIndex;
    if(actI===0){
      dotIndex= totalReal-1;
    } else if(actI=== slides.length-1){
      dotIndex=0;
    } else {
      dotIndex= actI-1;
    }
    dots.forEach((d,i)=> d.classList.toggle("active", i===dotIndex));
  }

  // 6) fixCloneIndex => è‹¥åœ¨[0]æˆ–æœ«å°¾ => æ— åŠ¨ç”»å›åˆ°ä¸­é—´(1æˆ– totalReal)
  function fixCloneIndex(){
    const actI= getActiveIndex();
    if(actI===0){
      if(isInViewport(container)){
        currentIndex= totalReal;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center" });
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex= totalReal;
      }
    } else if(actI=== slides.length -1){
      if(isInViewport(container)){
        currentIndex=1;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center" });
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex=1;
      }
    } else {
      currentIndex= actI;
    }
    updateClasses();
  }

  // 7) scroll => é˜²æŠ– => fixCloneIndex
  track.addEventListener("scroll",()=>{
    if(scrollTimer) clearTimeout(scrollTimer);
    scrollTimer= setTimeout(()=>{
      fixCloneIndex();
      updateClasses();
    },150);
  });

  // â€”â€” æ–°å¢ï¼šåˆ‡æ¢å‡½æ•°ï¼ˆä¸åŸç‰ˆ next/prevSlide ä½ç½®å¯¹é½ï¼‰ â€”â€” 
  function nextSlide(){
    if(!isInViewport(container)){
      stopAuto();
      return;
    }
    if(currentIndex=== slides.length-2){
      track.style.scrollBehavior="auto";
      currentIndex= 1;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center" });
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex++;
      scrollToIndex(currentIndex,true);
    }
  }
  function prevSlide(){
    if(!isInViewport(container)){
      stopAuto();
      return;
    }
    if(currentIndex===1){
      track.style.scrollBehavior="auto";
      currentIndex= totalReal;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center" });
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex--;
      scrollToIndex(currentIndex,true);
    }
  }
  function scrollToIndex(i, smooth=true){
    if(i<0) i=0;
    if(i>= slides.length) i= slides.length-1;
    const target= slides[i];
    if(!target) return;
    if(isInViewport(container)){
      track.style.scrollBehavior= smooth?"smooth":"auto";
      target.scrollIntoView({ 
        behavior: smooth?"smooth":"auto",
        block:"nearest",
        inline:"center"
      });
    } else {
      currentIndex= i;
    }
    updateClasses();
  }

  // â€”â€” æ–°å¢ï¼šè‡ªåŠ¨æ’­æ”¾æ§åˆ¶ â€”â€” 
  function startAuto(){
    if(!autoTimer){
      autoTimer = setInterval(nextSlide, autoplayInterval);
    }
  }
  function stopAuto(){
    clearInterval(autoTimer);
    autoTimer = null;
  }
  function resetAutoTimer(){
    stopAuto();
    startAuto();
  }

  // 9) æŒ‰é’® & dots & slideç‚¹å‡»
  prevBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    prevSlide();
    resetAutoTimer();
  });
  nextBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    nextSlide();
    resetAutoTimer();
  });
  dots.forEach((dot,i)=>{
    dot.addEventListener("click",(e)=>{
      e.stopPropagation();
      currentIndex= i+1;
      scrollToIndex(currentIndex,true);
      resetAutoTimer();
    });
  });
  slides.forEach((slide)=>{
    slide.addEventListener("click",(e)=>{
      if(slide.classList.contains("active")){
        // do nothing
      } else if(slide.classList.contains("next")){
        e.preventDefault();
        nextSlide();
        resetAutoTimer();
      } else if(slide.classList.contains("prev")){
        e.preventDefault();
        prevSlide();
        resetAutoTimer();
      }
    });
    const exploreBtn= slide.querySelector(".natural2-explore-btn");
    if(exploreBtn){
      exploreBtn.addEventListener("click",(ev)=> ev.stopPropagation());
    }
  });

  // 10) æ‰‹åŠ¨æ»‘åŠ¨ => æš‚åœ => 3såé‡å¯(è‹¥å¯è§)
  track.addEventListener("touchstart",(e)=>{
    stopAuto();
  });
  track.addEventListener("touchend",(e)=>{
    setTimeout(()=>{
      if(isInViewport(container) && !autoTimer){
        startAuto();
      }
    },3000);
  });

  // 11) æ¢å¤ç©ºç™½ => visibilitychange / pageshow
  document.addEventListener("visibilitychange", handleVisibilityChange);
  window.addEventListener("pageshow", handlePageShow);
  function handleVisibilityChange() {
    if (!document.hidden) {
      if (!autoTimer && isInViewport(container)) {
        startAuto();
      }
      if (isInViewport(container)) {
        fixCloneIndex();
        updateClasses();
        track.style.scrollBehavior = "auto";
        slides[currentIndex].scrollIntoView({ behavior: "auto", inline: "center", block: "nearest" });
        track.style.scrollBehavior = "smooth";
      }
    } else {
      stopAuto();
    }
  }
  function handlePageShow(e) {
    if (e.persisted) {
      if (isInViewport(container)) {
        fixCloneIndex();
        updateClasses();
        track.style.scrollBehavior = "auto";
        slides[currentIndex].scrollIntoView({ behavior: "auto", inline: "center", block: "nearest" });
        track.style.scrollBehavior = "smooth";
      }
    }
  }

  // â€”â€” æ–°å¢ï¼šå¯è§å³è‡ªåŠ¨æ’­æ”¾ï¼Œä¸å¯è§æš‚åœ â€”â€” 
  const obs = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        startAuto();
      } else {
        stopAuto();
      }
    });
  },{ threshold: 0.5 });
  obs.observe(container);

  // 12) init
  function init(){
    track.style.scrollBehavior="auto";
    scrollToIndex(currentIndex,false);
    track.style.scrollBehavior="smooth";
    updateClasses();
    startAuto(); // â€”â€” æ–°å¢ï¼šåˆå§‹åŒ–æ—¶å¯åŠ¨è‡ªåŠ¨æ’­æ”¾
  }
  init();

  window.addEventListener("resize", ()=>{
    fixCloneIndex();
    updateClasses();
  });
}


  // ============== æ¡Œé¢ç«¯ => ä¼˜åŒ– => ä»…å½“å¯è§†åŒº => auto-play, etc ==============
function initSnapCarouselDesktopOptimized_N2(){
  console.log("[natural2-desktop] scroll-snap + clone + observer => no jump, N2.");
  const container = document.querySelector(".natural2-carousel-container");
  const track     = container.querySelector(".natural2-carousel-track");
  let slides      = Array.from(track.querySelectorAll(".natural2-carousel-slide"));
  if(!slides.length){
    console.warn("[natural2-desktop] no slides found!");
    return;
  }

  const prevBtn = document.querySelector(".natural2-carousel-prev");
  const nextBtn = document.querySelector(".natural2-carousel-next");
  const dots    = Array.from(document.querySelectorAll(".natural2-carousel-dot"));

  // A) é¦–å°¾å…‹éš†
  const totalReal= slides.length;
  const firstClone= slides[0].cloneNode(true);
  const lastClone = slides[slides.length-1].cloneNode(true);
  track.appendChild(firstClone);
  track.insertBefore(lastClone, slides[0]);
  slides= Array.from(track.querySelectorAll(".natural2-carousel-slide"));

  // B) å½“å‰ç´¢å¼•=1 => ç¬¬ä¸€å¼ çœŸå®
  let currentIndex= 1;
  let scrollTimer= null;
  let autoTimer= null; // è‡ªåŠ¨æ’­æ”¾å®šæ—¶å™¨

  // C) scroll-snap
  container.style.overflowX      = "auto";
  container.style.scrollSnapType = "x mandatory";
  container.style.scrollBehavior = "smooth";

  slides.forEach(sl=>{
    sl.style.scrollSnapAlign= "center";
    // å…¶ä»– CSS è§†éœ€
  });

  // D) setInitialPos => è‹¥åœ¨è§†å£åˆ™æ»šåˆ° index=1
  function setInitialPos(){
    if(isInViewport(container)){
      track.style.scrollBehavior="auto";
      slides[1].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    }
  }
  setInitialPos();

  // E) æ‰¾åˆ°æœ€æ´»è·ƒslide => è·å®¹å™¨ä¸­å¿ƒæœ€è¿‘
  function getActiveIndex(){
    const cRect= container.getBoundingClientRect();
    const cCenter= cRect.left + cRect.width/2;
    let minDiff= Infinity, foundI=1;
    slides.forEach((sl,i)=>{
      const r= sl.getBoundingClientRect();
      const sCenter= r.left + r.width/2;
      const diff= Math.abs(sCenter- cCenter);
      if(diff< minDiff){
        minDiff= diff;
        foundI= i;
      }
    });
    return foundI;
  }

  // F) updateClasses => active, next, prev, dots
  function updateClasses(){
    const actI= getActiveIndex();
    slides.forEach(s=> s.classList.remove("active","prev","next","shadow"));
    slides[actI]?.classList.add("active");
    const nextI= (actI+1)%slides.length;
    const prevI= (actI-1+ slides.length)% slides.length;
    slides[nextI]?.classList.add("next");
    slides[prevI]?.classList.add("prev");
    slides.forEach(s=>{
      if(!s.classList.contains("active")){
        s.classList.add("shadow");
      }
    });
    // dots => 0 => totalReal-1, last => 0
    let dotIndex;
    if(actI===0){
      dotIndex= totalReal-1;
    } else if(actI=== slides.length-1){
      dotIndex=0;
    } else {
      dotIndex= actI-1;
    }
    dots.forEach((d,i)=>{
      d.classList.toggle("active", i=== dotIndex);
    });
  }

  // G) fixCloneIndex => è‹¥ actI=0 => è·³åˆ° totalReal, actI=slides.length-1 => è·³åˆ°1
  function fixCloneIndex(){
    const actI= getActiveIndex();
    if(actI===0){
      if(isInViewport(container)){
        currentIndex= totalReal;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex= totalReal;
      }
    } else if(actI=== slides.length-1){
      if(isInViewport(container)){
        currentIndex=1;
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      } else {
        currentIndex=1;
      }
    } else {
      currentIndex= actI;
    }
    updateClasses();
  }

  // H) scroll => é˜²æŠ– => fixCloneIndex
  track.addEventListener("scroll",()=>{
    if(scrollTimer) clearTimeout(scrollTimer);
    scrollTimer= setTimeout(()=>{
      fixCloneIndex();
      updateClasses();
    },150);
  });

  // I) autoTimer => only +1 => no skip
  let autoplayInterval= 5000;
  // å…ˆä¸ç«‹å³å¼€å¯ => ç”± intersection observer æ¥å†³å®šä½•æ—¶å¼€å¯
  // autoTimer= setInterval(nextSlide, autoplayInterval);

  function nextSlide(){
    if(!isInViewport(container)){
      stopAutoTimer();
      return;
    }
    if(currentIndex=== slides.length-2){
      // åˆ°æœ€åçœŸå® => å›åˆ°1
      track.style.scrollBehavior="auto";
      currentIndex=1;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex++;
      scrollToIndex(currentIndex,true);
    }
  }
  function prevSlide(){
    if(!isInViewport(container)){
      stopAutoTimer();
      return;
    }
    if(currentIndex===1){
      track.style.scrollBehavior="auto";
      currentIndex= totalReal;
      slides[currentIndex].scrollIntoView({ block:"nearest", inline:"center"});
      track.style.scrollBehavior="smooth";
    } else {
      currentIndex--;
      scrollToIndex(currentIndex,true);
    }
  }
  function scrollToIndex(i, smooth=true){
    if(i<0) i=0;
    if(i>= slides.length) i= slides.length-1;
    const target= slides[i];
    if(!target) return;
    if(isInViewport(container)){
      track.style.scrollBehavior= smooth?"smooth":"auto";
      target.scrollIntoView({
        behavior: smooth?"smooth":"auto",
        block:"nearest",
        inline:"center"
      });
    } else {
      currentIndex= i;
    }
  }
  function stopAutoTimer(){
    clearInterval(autoTimer);
    autoTimer= null;
  }
  function startAutoTimer(){
    if(!autoTimer){
      autoTimer= setInterval(nextSlide, autoplayInterval);
    }
  }
  function resetAutoTimer(){
    stopAutoTimer();
    startAutoTimer();
  }

  // J) æŒ‰é’® / dots
  prevBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    prevSlide();
    resetAutoTimer();
  });
  nextBtn?.addEventListener("click",(e)=>{
    e.stopPropagation();
    nextSlide();
    resetAutoTimer();
  });
  dots.forEach((dot,i)=>{
    dot.addEventListener("click",(e)=>{
      e.stopPropagation();
      currentIndex= i+1;
      scrollToIndex(currentIndex,true);
      resetAutoTimer();
    });
  });
  slides.forEach((slide)=>{
    slide.addEventListener("click",(e)=>{
      if(slide.classList.contains("active")){
        // do nothing
      } else if(slide.classList.contains("next")){
        e.preventDefault();
        nextSlide();
        resetAutoTimer();
      } else if(slide.classList.contains("prev")){
        e.preventDefault();
        prevSlide();
        resetAutoTimer();
      }
    });
    const exploreBtn= slide.querySelector(".natural2-explore-btn");
    if(exploreBtn){
      exploreBtn.addEventListener("click",(ev)=> ev.stopPropagation());
    }
  });

  // K) visibilitychange/pageshow => ä¸è·³é¡µ
  document.addEventListener("visibilitychange", handleVisibilityChange);
  window.addEventListener("pageshow", handlePageShow);

  function handleVisibilityChange(){
    if(!document.hidden){
      // å›åˆ°å‰å° => ä¿®æ­£ç´¢å¼•ï¼Œä½†ä»…åœ¨è½®æ’­åŒºåŸŸåœ¨å¯è§†åŒºæ—¶æ‰æ»šåŠ¨
      fixCloneIndex();
      
      // è‹¥æ²¡æœ‰è‡ªåŠ¨æ’­æ”¾ä¸”å®¹å™¨åœ¨è§†å£ -> å¼€å¯
      if(!autoTimer && isInViewport(container)){
        startAutoTimer();
      }
      // â˜… å¦‚æœä¸åœ¨å¯è§†åŒº -> ä¸æ»šåŠ¨
      if(isInViewport(container)){
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      }
    } else {
      // ç¦»å¼€ => stop
      stopAutoTimer();
    }
  }

  function handlePageShow(e){
    if(e.persisted){
      // èµ° bfcache
      // åŒæ ·ï¼Œä¿®æ­£ç´¢å¼•ï¼Œä½†åªæœ‰å½“å®¹å™¨åœ¨è§†å£ä¸­æ—¶æ‰å¼ºåˆ¶æ»šåŠ¨
      fixCloneIndex();
      if(isInViewport(container)){
        track.style.scrollBehavior="auto";
        slides[currentIndex].scrollIntoView({ behavior:"auto", block:"nearest", inline:"center"});
        track.style.scrollBehavior="smooth";
      }
    }
  }

  // L) IntersectionObserver => å½“ç”¨æˆ·åˆ’åˆ° natural2 åŒºåŸŸ => start auto
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        startAutoTimer();
      } else {
        stopAutoTimer();
      }
    });
  }, { threshold: 0.1 }); 
  observer.observe(container);

  // M) åˆå§‹åŒ–
  function init(){
    track.style.scrollBehavior="auto";
    scrollToIndex(currentIndex,false);
    track.style.scrollBehavior="smooth";
    updateClasses();
  }
  init();

  window.addEventListener("resize", ()=>{
    fixCloneIndex();
    updateClasses();
  });
}

/** ============== isInViewport ============== **/
function isInViewport(elem){
  if(!elem) return false;
  const rect= elem.getBoundingClientRect();
  return (rect.top< window.innerHeight && rect.bottom>=0);
}


/**
 * ============== æ–°å¢ç¤ºä¾‹å‡½æ•°: isCenteredInViewport ==============
 * å¦‚æœä½ æƒ³æ›´ä¸¥æ ¼åœ°åˆ¤æ–­ natural2 å®¹å™¨æ˜¯å¦â€œå±…ä¸­æˆ–é™„è¿‘â€ï¼Œ
 * å¯ä»¥å®šä¹‰ä¸€ä¸ªé˜ˆå€¼ï¼Œæ¯”å¦‚ä¸Šä¸‹100pxéƒ½è§†ä¸ºâ€œé™„è¿‘â€ã€‚
 */
function isCenteredInViewport(elem){
  if(!elem) return false;
  const rect = elem.getBoundingClientRect();
  const windowHeight = window.innerHeight;
  // è®¡ç®—å®¹å™¨çš„å‚ç›´ä¸­ç‚¹
  const containerCenter = rect.top + rect.height / 2;
  // æµè§ˆå™¨è§†å£ä¸­ç‚¹
  const viewportCenter  = windowHeight / 2;
  // é˜ˆå€¼ï¼Œä¾‹å¦‚ä¸Šä¸‹ 100 px éƒ½ç®—æ˜¯â€œé è¿‘ä¸­å¿ƒâ€
  const threshold = 100; 
  return Math.abs(containerCenter - viewportCenter) <= threshold;
}

})();


  <!-- ================= æ–°å¢ï¼šå›åˆ°é¡¶éƒ¨åŠŸèƒ½è„šæœ¬ ================= -->

    document.addEventListener("DOMContentLoaded", function() {
      const backToTop = document.getElementById("backToTop");
      window.addEventListener("scroll", function() {
        if (window.scrollY > 500) {
          backToTop.style.display = "flex";
        } else {
          backToTop.style.display = "none";
        }
      });
      backToTop.addEventListener("click", function() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    });






</script>
</body>
</html>



     
  




